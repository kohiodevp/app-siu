import{a as J}from"./chunk-J6FMTRGJ.js";import{g as R}from"./chunk-X6CIBPON.js";import{a as V,b as H}from"./chunk-U6EES5RG.js";import{a as L,b as z}from"./chunk-EJWNUG5D.js";import{d as U,h as j,i as K}from"./chunk-474YFGF3.js";import{f as q}from"./chunk-QVMFGACW.js";import"./chunk-CVA3OUYK.js";import{c as D}from"./chunk-JBX6OC6U.js";import{a as k}from"./chunk-V6MGZ35S.js";import{b as P,i as O}from"./chunk-DEKAXLAX.js";import{b as F}from"./chunk-GWNY4E3S.js";import"./chunk-MXRZJWAE.js";import"./chunk-3FMCGYQ4.js";import{a as I,b as B}from"./chunk-FJY5KO7T.js";import"./chunk-L64YGAYQ.js";import{a as x,b as M,c as y,f as C,h as b}from"./chunk-HFRGPHGK.js";import{s as E,u as _}from"./chunk-M2VBT7VT.js";import{a as A,b as w}from"./chunk-STMJJCCP.js";import{a as S}from"./chunk-IE4XPFBV.js";import{$ as T,Y as N}from"./chunk-ZNVG5ZVS.js";import"./chunk-LMV7XNWS.js";import"./chunk-FBCHPQNP.js";import{p as v}from"./chunk-YGREV7VD.js";import{Ib as d,Jb as i,Kb as e,Lb as g,Wb as m,Xa as s,ba as p,kc as t,lb as h,mc as u,sa as c}from"./chunk-E7AQ6X4Y.js";import"./chunk-EQDQRRRY.js";var $=class f{constructor(){this.fb=p(E);this.themeService=p(J);this.authService=p(S);this.snackBar=p(I);this.theme=this.themeService.theme;this.density=c("comfortable");this.notificationsEnabled=c(!0);this.emailNotifications=c(!1);this.notificationSound=c(!0);this.language=c("fr");this.dateFormat=c("dd/MM/yyyy");this.analytics=c(!1);this.publicProfile=c(!1);this.loadSettings()}loadSettings(){let a=localStorage.getItem("siu_settings");if(a)try{let l=JSON.parse(a);this.density.set(l.density||"comfortable"),this.notificationsEnabled.set(l.notifications??!0),this.emailNotifications.set(l.emailNotifications??!1),this.notificationSound.set(l.notificationSound??!0),this.language.set(l.language||"fr"),this.dateFormat.set(l.dateFormat||"dd/MM/yyyy"),this.analytics.set(l.analytics??!1),this.publicProfile.set(l.publicProfile??!1)}catch(l){console.error("Error loading settings:",l)}}saveSettings(){let a={density:this.density(),notifications:this.notificationsEnabled(),emailNotifications:this.emailNotifications(),notificationSound:this.notificationSound(),language:this.language(),dateFormat:this.dateFormat(),analytics:this.analytics(),publicProfile:this.publicProfile()};localStorage.setItem("siu_settings",JSON.stringify(a)),this.snackBar.open("Param\xE8tres sauvegard\xE9s","OK",{duration:2e3})}onThemeChange(a){this.themeService.setTheme(a),this.snackBar.open("Th\xE8me modifi\xE9","OK",{duration:2e3})}onDensityChange(a){this.density.set(a),this.saveSettings()}toggleNotifications(a){this.notificationsEnabled.set(a),this.saveSettings()}toggleEmailNotifications(a){this.emailNotifications.set(a),this.saveSettings()}toggleNotificationSound(a){this.notificationSound.set(a),this.saveSettings()}onLanguageChange(a){this.language.set(a),this.saveSettings(),this.snackBar.open("Langue modifi\xE9e (red\xE9marrage requis)","OK",{duration:3e3})}onDateFormatChange(a){this.dateFormat.set(a),this.saveSettings()}toggleAnalytics(a){this.analytics.set(a),this.saveSettings()}togglePublicProfile(a){this.publicProfile.set(a),this.saveSettings()}clearCache(){let a=["siu_settings","siu_auth_token","siu_user","siu_theme"],l=[];for(let n=0;n<localStorage.length;n++){let r=localStorage.key(n);r&&!a.includes(r)&&l.push(r)}l.forEach(n=>localStorage.removeItem(n)),this.snackBar.open("Cache vid\xE9 avec succ\xE8s","OK",{duration:3e3})}resetSettings(){confirm("\xCAtes-vous s\xFBr de vouloir r\xE9initialiser tous les param\xE8tres ?")&&(localStorage.removeItem("siu_settings"),this.loadSettings(),this.themeService.setTheme("auto"),this.snackBar.open("Param\xE8tres r\xE9initialis\xE9s","OK",{duration:3e3}))}exportData(){let a=this.authService.currentUser(),l={user:{id:a?.id,username:a?.username,email:a?.email,first:a?.first_name},settings:{theme:this.themeService.getCurrentTheme(),density:this.density(),language:this.language(),dateFormat:this.dateFormat()},exportDate:new Date().toISOString()},n=new Blob([JSON.stringify(l,null,2)],{type:"application/json"}),r=window.URL.createObjectURL(n),o=document.createElement("a");o.href=r,o.download=`siu-data-export-${new Date().getTime()}.json`,o.click(),window.URL.revokeObjectURL(r),this.snackBar.open("Donn\xE9es export\xE9es","OK",{duration:3e3})}static{this.\u0275fac=function(l){return new(l||f)}}static{this.\u0275cmp=h({type:f,selectors:[["app-settings"]],decls:184,vars:14,consts:[[1,"settings-container"],[1,"page-title"],[1,"settings-card"],[1,"settings-section"],[1,"setting-item"],[1,"setting-info"],["appearance","outline"],[3,"selectionChange","value"],["value","light"],["value","dark"],["value","auto"],["value","comfortable"],["value","compact"],["value","spacious"],[3,"change","checked"],["value","fr"],["value","en"],["value","ar"],["value","dd/MM/yyyy"],["value","MM/dd/yyyy"],["value","yyyy-MM-dd"],[1,"actions-section"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","warn",3,"click"],[1,"settings-card","info-card"],[1,"app-info"],[1,"info-icon"],[1,"info-content"],[1,"small"]],template:function(l,n){l&1&&(i(0,"div",0)(1,"h1",1)(2,"mat-icon"),t(3,"settings"),e(),t(4," Param\xE8tres "),e(),i(5,"mat-card",2)(6,"mat-card-header")(7,"mat-card-title")(8,"mat-icon"),t(9,"palette"),e(),t(10," Apparence "),e()(),i(11,"mat-card-content")(12,"div",3)(13,"div",4)(14,"div",5)(15,"h3"),t(16,"Th\xE8me"),e(),i(17,"p"),t(18,"Choisissez entre le th\xE8me clair, sombre ou automatique"),e()(),i(19,"mat-form-field",6)(20,"mat-label"),t(21,"Th\xE8me"),e(),i(22,"mat-select",7),m("selectionChange",function(o){return n.onThemeChange(o.value)}),i(23,"mat-option",8)(24,"mat-icon"),t(25,"light_mode"),e(),t(26," Clair "),e(),i(27,"mat-option",9)(28,"mat-icon"),t(29,"dark_mode"),e(),t(30," Sombre "),e(),i(31,"mat-option",10)(32,"mat-icon"),t(33,"brightness_auto"),e(),t(34," Automatique "),e()()()(),g(35,"mat-divider"),i(36,"div",4)(37,"div",5)(38,"h3"),t(39,"Densit\xE9 d'affichage"),e(),i(40,"p"),t(41,"Ajustez l'espacement des \xE9l\xE9ments de l'interface"),e()(),i(42,"mat-form-field",6)(43,"mat-label"),t(44,"Densit\xE9"),e(),i(45,"mat-select",7),m("selectionChange",function(o){return n.onDensityChange(o.value)}),i(46,"mat-option",11),t(47,"Confortable"),e(),i(48,"mat-option",12),t(49,"Compact"),e(),i(50,"mat-option",13),t(51,"Espac\xE9"),e()()()()()()(),i(52,"mat-card",2)(53,"mat-card-header")(54,"mat-card-title")(55,"mat-icon"),t(56,"notifications"),e(),t(57," Notifications "),e()(),i(58,"mat-card-content")(59,"div",3)(60,"div",4)(61,"div",5)(62,"h3"),t(63,"Notifications du syst\xE8me"),e(),i(64,"p"),t(65,"Recevoir des notifications pour les \xE9v\xE9nements importants"),e()(),i(66,"mat-slide-toggle",14),m("change",function(o){return n.toggleNotifications(o.checked)}),t(67),e()(),g(68,"mat-divider"),i(69,"div",4)(70,"div",5)(71,"h3"),t(72,"Notifications par email"),e(),i(73,"p"),t(74,"Recevoir des notifications importantes par email"),e()(),i(75,"mat-slide-toggle",14),m("change",function(o){return n.toggleEmailNotifications(o.checked)}),t(76),e()(),g(77,"mat-divider"),i(78,"div",4)(79,"div",5)(80,"h3"),t(81,"Son des notifications"),e(),i(82,"p"),t(83,"\xC9mettre un son lors de nouvelles notifications"),e()(),i(84,"mat-slide-toggle",14),m("change",function(o){return n.toggleNotificationSound(o.checked)}),t(85),e()()()()(),i(86,"mat-card",2)(87,"mat-card-header")(88,"mat-card-title")(89,"mat-icon"),t(90,"language"),e(),t(91," Langue et R\xE9gion "),e()(),i(92,"mat-card-content")(93,"div",3)(94,"div",4)(95,"div",5)(96,"h3"),t(97,"Langue"),e(),i(98,"p"),t(99,"Choisissez la langue de l'interface"),e()(),i(100,"mat-form-field",6)(101,"mat-label"),t(102,"Langue"),e(),i(103,"mat-select",7),m("selectionChange",function(o){return n.onLanguageChange(o.value)}),i(104,"mat-option",15),t(105,"Fran\xE7ais"),e(),i(106,"mat-option",16),t(107,"English"),e(),i(108,"mat-option",17),t(109,"\u0627\u0644\u0639\u0631\u0628\u064A\u0629"),e()()()(),g(110,"mat-divider"),i(111,"div",4)(112,"div",5)(113,"h3"),t(114,"Format de date"),e(),i(115,"p"),t(116,"Format d'affichage des dates"),e()(),i(117,"mat-form-field",6)(118,"mat-label"),t(119,"Format"),e(),i(120,"mat-select",7),m("selectionChange",function(o){return n.onDateFormatChange(o.value)}),i(121,"mat-option",18),t(122,"JJ/MM/AAAA"),e(),i(123,"mat-option",19),t(124,"MM/JJ/AAAA"),e(),i(125,"mat-option",20),t(126,"AAAA-MM-JJ"),e()()()()()()(),i(127,"mat-card",2)(128,"mat-card-header")(129,"mat-card-title")(130,"mat-icon"),t(131,"privacy_tip"),e(),t(132," Confidentialit\xE9 "),e()(),i(133,"mat-card-content")(134,"div",3)(135,"div",4)(136,"div",5)(137,"h3"),t(138,"Partage de donn\xE9es d'utilisation"),e(),i(139,"p"),t(140,"Aider \xE0 am\xE9liorer l'application en partageant des donn\xE9es anonymis\xE9es"),e()(),i(141,"mat-slide-toggle",14),m("change",function(o){return n.toggleAnalytics(o.checked)}),t(142),e()(),g(143,"mat-divider"),i(144,"div",4)(145,"div",5)(146,"h3"),t(147,"Profil public"),e(),i(148,"p"),t(149,"Permettre aux autres utilisateurs de voir votre profil"),e()(),i(150,"mat-slide-toggle",14),m("change",function(o){return n.togglePublicProfile(o.checked)}),t(151),e()()()()(),i(152,"mat-card",2)(153,"mat-card-header")(154,"mat-card-title")(155,"mat-icon"),t(156,"build"),e(),t(157," Maintenance "),e()(),i(158,"mat-card-content")(159,"div",21)(160,"button",22),m("click",function(){return n.clearCache()}),i(161,"mat-icon"),t(162,"cleaning_services"),e(),t(163," Vider le cache "),e(),i(164,"button",22),m("click",function(){return n.resetSettings()}),i(165,"mat-icon"),t(166,"restart_alt"),e(),t(167," R\xE9initialiser les param\xE8tres "),e(),i(168,"button",23),m("click",function(){return n.exportData()}),i(169,"mat-icon"),t(170,"download"),e(),t(171," Exporter mes donn\xE9es "),e()()()(),i(172,"mat-card",24)(173,"mat-card-content")(174,"div",25)(175,"mat-icon",26),t(176,"info"),e(),i(177,"div",27)(178,"h3"),t(179,"SIU - Syst\xE8me d'Information Urbain"),e(),i(180,"p"),t(181,"Version 2.0.0"),e(),i(182,"p",28),t(183,"\xA9 2026 SIU. Tous droits r\xE9serv\xE9s."),e()()()()()()),l&2&&(s(22),d("value",n.theme()),s(23),d("value",n.density()),s(21),d("checked",n.notificationsEnabled()),s(),u(" ",n.notificationsEnabled()?"Activ\xE9es":"D\xE9sactiv\xE9es"," "),s(8),d("checked",n.emailNotifications()),s(),u(" ",n.emailNotifications()?"Activ\xE9es":"D\xE9sactiv\xE9es"," "),s(8),d("checked",n.notificationSound()),s(),u(" ",n.notificationSound()?"Activ\xE9":"D\xE9sactiv\xE9"," "),s(18),d("value",n.language()),s(17),d("value",n.dateFormat()),s(21),d("checked",n.analytics()),s(),u(" ",n.analytics()?"Activ\xE9":"D\xE9sactiv\xE9"," "),s(8),d("checked",n.publicProfile()),s(),u(" ",n.publicProfile()?"Public":"Priv\xE9"," "))},dependencies:[v,_,b,x,y,C,M,k,O,P,D,T,N,w,A,z,L,H,V,K,j,U,B,F,R,q],styles:[".settings-container[_ngcontent-%COMP%]{padding:24px;max-width:1000px;margin:0 auto}.page-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;font-size:28px;margin-bottom:24px;color:#333}.settings-card[_ngcontent-%COMP%]{margin-bottom:24px;box-shadow:0 2px 4px #0000001a}mat-card-header[_ngcontent-%COMP%]{margin-bottom:16px}mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:20px}.settings-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.setting-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 0;gap:24px}.setting-info[_ngcontent-%COMP%]{flex:1}.setting-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 4px;font-size:16px;font-weight:500;color:#333}.setting-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#666}mat-form-field[_ngcontent-%COMP%]{min-width:200px}.actions-section[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:12px;padding:8px 0}.actions-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;min-width:200px}.info-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.app-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.info-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px}.info-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:18px}.info-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;opacity:.9}.info-content[_ngcontent-%COMP%]   .small[_ngcontent-%COMP%]{font-size:12px;opacity:.7}@media(max-width:768px){.setting-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}mat-form-field[_ngcontent-%COMP%]{width:100%}.actions-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}"],changeDetection:0})}};export{$ as SettingsComponent};
