import{A as i,u as h,v as u}from"./chunk-3AYM6UTQ.js";import{B as s,Y as l,ba as p,m as o}from"./chunk-E7AQ6X4Y.js";var b=class n{constructor(){this.http=p(u);this.baseUrl=`${i.apiUrl}${i.apiPrefix}`}get(r,t){let e=this.buildParams(t);return this.http.get(`${this.baseUrl}${r}`,{params:e}).pipe(s(this.handleError))}post(r,t){return this.http.post(`${this.baseUrl}${r}`,t).pipe(s(this.handleError))}put(r,t){return this.http.put(`${this.baseUrl}${r}`,t).pipe(s(this.handleError))}patch(r,t){return this.http.patch(`${this.baseUrl}${r}`,t).pipe(s(this.handleError))}delete(r,t){let e=this.buildParams(t);return this.http.delete(`${this.baseUrl}${r}`,{params:e}).pipe(s(this.handleError))}upload(r,t){return this.http.post(`${this.baseUrl}${r}`,t).pipe(s(this.handleError))}download(r){return this.http.get(`${this.baseUrl}${r}`,{responseType:"blob"}).pipe(s(this.handleError))}postBlob(r,t){return this.http.post(`${this.baseUrl}${r}`,t,{responseType:"blob"}).pipe(s(this.handleError))}buildParams(r){let t=new h;return r&&Object.keys(r).forEach(e=>{let a=r[e];a!=null&&(t=t.set(e,String(a)))}),t}handleError(r){let t="Une erreur est survenue";r.error instanceof ErrorEvent?t=`Erreur: ${r.error.message}`:r.status===401?t="Non autoris\xE9. Veuillez vous reconnecter.":r.status===403?t="Acc\xE8s refus\xE9.":r.status===404?t="Ressource non trouv\xE9e.":r.status===500?t="Erreur serveur. Veuillez r\xE9essayer plus tard.":r.error?.detail?t=r.error.detail:r.error?.message&&(t=r.error.message),console.error("API Error:",r);let e=new Error(t);return e.status=r.status,e.statusText=r.statusText,e.error=r.error,o(()=>e)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=l({token:n,factory:n.\u0275fac,providedIn:"root"})}};export{b as a};
