import{b as tt,c as et,d as nt}from"./chunk-WO6PXY3V.js";import{a as j,b as $,c as G,d as q,e as J,g as K}from"./chunk-3NU3BBLD.js";import{a as Z}from"./chunk-BYAQRIZS.js";import{a as Y}from"./chunk-2XBNJKWF.js";import"./chunk-HD4V77CK.js";import{b as W,f as X}from"./chunk-TC4NHXKF.js";import"./chunk-YPBVTN56.js";import{a as z,b as F}from"./chunk-3WYC6ROS.js";import"./chunk-AC4QEAXS.js";import"./chunk-QLHDTFGW.js";import{a as Q}from"./chunk-4PMYLZD4.js";import"./chunk-XMY2MG46.js";import"./chunk-QDNYLZKO.js";import{a as T,b as L,c as k,f as w,h as A}from"./chunk-FY6NZ6SC.js";import"./chunk-4TEKNYBZ.js";import{a as V,b as R}from"./chunk-UUJ2B6HP.js";import{$ as H,W as N,Y as B}from"./chunk-AQZ5PN4T.js";import{a as D,c as U}from"./chunk-JWWLDGKM.js";import"./chunk-NYFRATJG.js";import{k as I}from"./chunk-3AYM6UTQ.js";import{Cb as m,Db as p,Gb as O,Hb as P,Jb as e,Kb as n,Lb as b,Sb as S,Wb as M,Xa as r,Yb as l,ba as d,ga as _,ha as C,jc as E,kc as i,lb as x,lc as c,mc as h,nc as y,sa as s,wc as f,yc as v}from"./chunk-E7AQ6X4Y.js";import"./chunk-EQDQRRRY.js";var at=(a,o)=>o.id;function ot(a,o){a&1&&(e(0,"div",1),b(1,"mat-spinner"),n())}function rt(a,o){if(a&1&&(e(0,"div",8)(1,"mat-icon"),i(2,"phone"),n(),e(3,"div")(4,"span",9),i(5,"T\xE9l\xE9phone"),n(),e(6,"span",10),i(7),n()()()),a&2){let t=l(2);r(7),c(t.user().phone)}}function ct(a,o){if(a&1&&(e(0,"div",8)(1,"mat-icon"),i(2,"business"),n(),e(3,"div")(4,"span",9),i(5,"D\xE9partement"),n(),e(6,"span",10),i(7),n()()()),a&2){let t=l(2);r(7),c(t.user().department)}}function lt(a,o){if(a&1&&(e(0,"mat-list-item")(1,"mat-icon",13),i(2,"history"),n(),e(3,"div",14),i(4),n(),e(5,"div",15),i(6),f(7,"date"),n()()),a&2){let t=o.$implicit;r(4),c(t.action),r(2),c(v(7,2,t.timestamp,"dd/MM/yyyy HH:mm"))}}function dt(a,o){if(a&1&&(e(0,"mat-list"),O(1,lt,8,5,"mat-list-item",null,at),n()),a&2){let t=l(2);r(),P(t.activities())}}function st(a,o){a&1&&(e(0,"p",12),i(1,"Aucune activit\xE9 r\xE9cente"),n())}function mt(a,o){if(a&1){let t=S();e(0,"div",2)(1,"button",3),M("click",function(){_(t);let u=l();return C(u.back())}),e(2,"mat-icon"),i(3,"arrow_back"),n()(),e(4,"h1"),i(5),n(),e(6,"button",4),M("click",function(){_(t);let u=l();return C(u.edit())}),e(7,"mat-icon"),i(8,"edit"),n(),i(9," Modifier "),n()(),e(10,"mat-tab-group")(11,"mat-tab",5)(12,"div",6)(13,"mat-card")(14,"mat-card-header")(15,"mat-card-title"),i(16,"D\xE9tails du compte"),n()(),e(17,"mat-card-content")(18,"div",7)(19,"div",8)(20,"mat-icon"),i(21,"person"),n(),e(22,"div")(23,"span",9),i(24,"Nom d'utilisateur"),n(),e(25,"span",10),i(26),n()()(),e(27,"div",8)(28,"mat-icon"),i(29,"email"),n(),e(30,"div")(31,"span",9),i(32,"Email"),n(),e(33,"span",10),i(34),n()()(),e(35,"div",8)(36,"mat-icon"),i(37,"shield"),n(),e(38,"div")(39,"span",9),i(40,"R\xF4le"),n(),e(41,"mat-chip"),i(42),n()()(),e(43,"div",8)(44,"mat-icon"),i(45),n(),e(46,"div")(47,"span",9),i(48,"Statut"),n(),e(49,"mat-chip"),i(50),n()()(),m(51,rt,8,1,"div",8),m(52,ct,8,1,"div",8),e(53,"div",8)(54,"mat-icon"),i(55,"event"),n(),e(56,"div")(57,"span",9),i(58,"Cr\xE9\xE9 le"),n(),e(59,"span",10),i(60),f(61,"date"),n()()()()()()()(),e(62,"mat-tab",11)(63,"div",6),m(64,dt,3,0,"mat-list")(65,st,2,0,"p",12),n()()()}if(a&2){let t=l();r(5),y("",t.user().first_name," ",t.user().last_name),r(21),c(t.user().username),r(8),c(t.user().email),r(8),c(t.roleLabels[t.user().role]||"N/A"),r(3),c(t.user().is_active?"check_circle":"cancel"),r(4),E(t.user().is_active?"active":"inactive"),r(),h(" ",t.user().is_active?"Actif":"Inactif"," "),r(),p(t.user().phone?51:-1),r(),p(t.user().department?52:-1),r(8),c(v(61,13,t.user().created_at,"dd/MM/yyyy HH:mm")),r(4),p(t.activities().length>0?64:65)}}var it=class a{constructor(){this.userService=d(Y);this.router=d(U);this.route=d(D);this.notificationService=d(Q);this.loading=s(!1);this.user=s(null);this.stats=s(null);this.activities=s([]);this.roleLabels=Z}ngOnInit(){let o=this.route.snapshot.paramMap.get("id");o&&(this.loadUser(parseInt(o)),this.loadStats(parseInt(o)),this.loadActivities(parseInt(o)))}loadUser(o){this.loading.set(!0),this.userService.getUserById(o).subscribe({next:t=>{this.user.set(t),this.loading.set(!1)},error:t=>{console.error("Error loading user:",t),this.notificationService.showError("Erreur lors du chargement"),this.loading.set(!1),this.router.navigate(["/users"])}})}loadStats(o){this.userService.getUserStats(o).subscribe({next:t=>this.stats.set(t),error:t=>console.error("Error loading stats:",t)})}loadActivities(o){this.userService.getUserActivity(o,20).subscribe({next:t=>this.activities.set(t),error:t=>console.error("Error loading activities:",t)})}edit(){this.router.navigate(["/users",this.user()?.id,"edit"])}back(){this.router.navigate(["/users"])}static{this.\u0275fac=function(t){return new(t||a)}}static{this.\u0275cmp=x({type:a,selectors:[["app-user-detail"]],decls:3,vars:1,consts:[[1,"user-detail-container"],[1,"loading"],[1,"page-header"],["mat-icon-button","",3,"click"],["mat-flat-button","","color","primary",3,"click"],["label","Informations"],[1,"tab-content"],[1,"info-grid"],[1,"info-item"],[1,"label"],[1,"value"],["label","Activit\xE9"],[1,"no-data"],["matListItemIcon",""],["matListItemTitle",""],["matListItemLine",""]],template:function(t,g){t&1&&(e(0,"div",0),m(1,ot,2,0,"div",1)(2,mt,66,16),n()),t&2&&(r(),p(g.loading()?1:g.user()?2:-1))},dependencies:[A,T,k,w,L,nt,tt,et,H,B,N,R,V,X,W,K,q,J,G,$,j,F,z,I],styles:[".user-detail-container[_ngcontent-%COMP%]{padding:24px;max-width:1200px;margin:0 auto}.user-detail-container[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:64px}.user-detail-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;margin-bottom:24px}.user-detail-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{flex:1;margin:0;font-size:24px;font-weight:500}.user-detail-container[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{padding:24px 0}.user-detail-container[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:24px}.user-detail-container[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:flex-start}.user-detail-container[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--mat-primary-color);margin-top:4px}.user-detail-container[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.user-detail-container[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:12px;color:var(--mat-text-secondary);font-weight:500}.user-detail-container[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:14px;color:var(--mat-text-primary)}.user-detail-container[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{width:fit-content}.user-detail-container[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   mat-chip.active[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.user-detail-container[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   mat-chip.inactive[_ngcontent-%COMP%]{background-color:#f44336;color:#fff}.user-detail-container[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]{text-align:center;padding:32px;color:var(--mat-text-secondary)}@media(max-width:768px){.user-detail-container[_ngcontent-%COMP%]{padding:16px}.user-detail-container[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"],changeDetection:0})}};export{it as UserDetailComponent};
