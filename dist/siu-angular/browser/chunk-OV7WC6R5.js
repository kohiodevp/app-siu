import"./chunk-HZBF5Z2J.js";import"./chunk-PQNUUMDX.js";import{a as Ti,b as ki,c as wi}from"./chunk-6DOQAXWL.js";import{a as ui,b as pi,c as _i,d as fi,e as gi,f as vi,g as bi,h as Si,i as Ci,j as yi,l as Mi}from"./chunk-3DRFPNYN.js";import{a as xi,b as Me}from"./chunk-TUX7OWEK.js";import{b as Ei}from"./chunk-D4D64KG6.js";import{a as Ii}from"./chunk-VUQ35JGS.js";import{a as si,b as oi,c as li,d as Ce,e as ci,f as di,g as H,h as hi,i as ye}from"./chunk-M2B5FNU7.js";import{f as mi}from"./chunk-TC4NHXKF.js";import"./chunk-CVA3OUYK.js";import{b as $t,c as ve}from"./chunk-E7OICD5F.js";import{a as ge}from"./chunk-OFBHONAA.js";import{b as zt,f as Wt,h as Xt,i as Ht}from"./chunk-YPBVTN56.js";import{a as qt,b as Se}from"./chunk-3WYC6ROS.js";import"./chunk-AC4QEAXS.js";import"./chunk-QLHDTFGW.js";import{a as ri}from"./chunk-TAVIRTLO.js";import{a as ni}from"./chunk-RSTPHI64.js";import{C as ai,b as Kt,m as Yt,o as Zt,r as Jt,s as ei,v as ti,z as ii}from"./chunk-QDNYLZKO.js";import{a as de,b as he,c as me,d as ue,f as pe,h as F}from"./chunk-FY6NZ6SC.js";import{a as xt,b as Tt,d as We,g as kt,h as wt,k as Et,l as It,m as Ot,n as Rt,p as At,s as oe,u as le}from"./chunk-4TEKNYBZ.js";import{a as be,b as L}from"./chunk-UUJ2B6HP.js";import{$ as N,A as _e,B as Ut,D as He,E as fe,O as Bt,Q as $e,W as jt,X as Qt,Y as Gt,a as Xe,b as ce,e as Pt,f as Vt,g as Dt,p as Ft,r as Nt,z as Lt}from"./chunk-AQZ5PN4T.js";import{c as Ct,d as yt,g as Mt}from"./chunk-JWWLDGKM.js";import"./chunk-NYFRATJG.js";import{A as ze,j as vt,n as bt,p as D,v as St}from"./chunk-3AYM6UTQ.js";import{$ as Ie,$b as De,Aa as Re,B as Ee,Bb as J,Cb as B,D as q,Db as z,E as Je,Fb as ee,G as et,Gb as W,H as K,Hb as X,Hc as re,Ib as m,Ic as se,Jb as r,Kb as s,Lb as g,Mb as ut,Mc as Be,Nb as pt,Pb as T,Q as tt,Qb as k,Qc as O,R as x,Sb as I,Tb as _t,U as it,Wb as p,X as at,Xa as c,Y as nt,Yb as u,Z as Y,Zb as Pe,_b as Ve,a as j,ac as Fe,ba as h,bb as lt,bc as R,c as E,cb as ct,cc as A,e as ke,ea as rt,eb as dt,f as Ye,ga as _,gc as te,ha as f,hb as ht,hc as ie,ic as Ne,jc as Le,ka as Oe,kc as o,l as v,lb as C,lc as w,mb as Z,mc as P,nb as Ae,oa as S,p as Q,pa as st,rb as y,sa as b,sb as mt,sc as ae,tc as ft,u as Ze,uc as Ue,wc as V,x as G,xa as ot,xc as ne,yc as gt,z as we}from"./chunk-E7AQ6X4Y.js";import{a as qe,b as Ke}from"./chunk-EQDQRRRY.js";var U=class a{constructor(){this.http=h(St);this.baseUrl=`${ze.apiUrl}${ze.apiPrefix}`;this.searchResultsSubject=new Ye({items:[],total:0,page:1,pageSize:20});this.searchResults$=this.searchResultsSubject.asObservable()}searchParcels(i){let e={};return i.reference&&(e.reference=i.reference),i.address&&(e.address=i.address),i.category&&(e.category=i.category),i.status&&(e.status=i.status),i.ownerName&&(e.ownerName=i.ownerName),i.minArea!==void 0&&(e.minArea=i.minArea),i.maxArea!==void 0&&(e.maxArea=i.maxArea),i.bbox&&(e.bbox=i.bbox),i.limit&&(e.limit=i.limit),i.offset&&(e.offset=i.offset),this.http.get(`${this.baseUrl}/parcels/search`,{params:e}).pipe(Q(t=>(this.searchResultsSubject.next(t),t)),Ee(t=>(console.error("Erreur lors de la recherche de parcelles:",t),v({items:[],total:0,page:1,pageSize:20}))))}saveSearchAsFavorite(i,e){let t={name:i,criteria:e,createdAt:new Date().toISOString()};return this.http.post(`${this.baseUrl}/favorites/searches`,t)}getFavoriteSearches(){return this.http.get(`${this.baseUrl}/favorites/searches`)}removeFavoriteSearch(i){return this.http.delete(`${this.baseUrl}/favorites/searches/${i}`)}getSuggestions(i,e="reference"){let t={query:i,type:e};return this.http.get(`${this.baseUrl}/parcels/suggestions`,{params:t}).pipe(Ee(()=>v([])))}static{this.\u0275fac=function(e){return new(e||a)}}static{this.\u0275prov=nt({token:a,factory:a.\u0275fac,providedIn:"root"})}};var Oi=(()=>{class a{static \u0275fac=function(t){return new(t||a)};static \u0275mod=Z({type:a});static \u0275inj=Y({imports:[Qt,ce]})}return a})();var Wi=["panel"],Xi=["*"];function Hi(a,i){if(a&1&&(ut(0,"div",1,0),Ve(2),pt()),a&2){let e=i.id,t=u();Le(t._classList),Ne("mat-mdc-autocomplete-visible",t.showPanel)("mat-mdc-autocomplete-hidden",!t.showPanel)("mat-autocomplete-panel-animations-enabled",!t._animationsDisabled)("mat-primary",t._color==="primary")("mat-accent",t._color==="accent")("mat-warn",t._color==="warn"),_t("id",t.id),J("aria-label",t.ariaLabel||null)("aria-labelledby",t._getPanelAriaLabelledby(e))}}var je=class{source;option;constructor(i,e){this.source=i,this.option=e}},Pi=new Ie("mat-autocomplete-default-options",{providedIn:"root",factory:()=>({autoActiveFirstOption:!1,autoSelectActiveOption:!1,hideSingleSelectionIndicator:!1,requireSelection:!1,hasBackdrop:!1})}),Vi=(()=>{class a{_changeDetectorRef=h(Be);_elementRef=h(Re);_defaults=h(Pi);_animationsDisabled=$e();_activeOptionChanges=j.EMPTY;_keyManager;showPanel=!1;get isOpen(){return this._isOpen&&this.showPanel}_isOpen=!1;_latestOpeningTrigger;_setColor(e){this._color=e,this._changeDetectorRef.markForCheck()}_color;template;panel;options;optionGroups;ariaLabel;ariaLabelledby;displayWith=null;autoActiveFirstOption;autoSelectActiveOption;requireSelection;panelWidth;disableRipple=!1;optionSelected=new S;opened=new S;closed=new S;optionActivated=new S;set classList(e){this._classList=e,this._elementRef.nativeElement.className=""}_classList;get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=e,this._syncParentProperties()}_hideSingleSelectionIndicator;_syncParentProperties(){if(this.options)for(let e of this.options)e._changeDetectorRef.markForCheck()}id=h(Lt).getId("mat-autocomplete-");inertGroups;constructor(){let e=h(Dt);this.inertGroups=e?.SAFARI||!1,this.autoActiveFirstOption=!!this._defaults.autoActiveFirstOption,this.autoSelectActiveOption=!!this._defaults.autoSelectActiveOption,this.requireSelection=!!this._defaults.requireSelection,this._hideSingleSelectionIndicator=this._defaults.hideSingleSelectionIndicator??!1}ngAfterContentInit(){this._keyManager=new Ut(this.options).withWrap().skipPredicate(this._skipPredicate),this._activeOptionChanges=this._keyManager.change.subscribe(e=>{this.isOpen&&this.optionActivated.emit({source:this,option:this.options.toArray()[e]||null})}),this._setVisibility()}ngOnDestroy(){this._keyManager?.destroy(),this._activeOptionChanges.unsubscribe()}_setScrollTop(e){this.panel&&(this.panel.nativeElement.scrollTop=e)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options?.length,this._changeDetectorRef.markForCheck()}_emitSelectEvent(e){let t=new je(this,e);this.optionSelected.emit(t)}_getPanelAriaLabelledby(e){if(this.ariaLabel)return null;let t=e?e+" ":"";return this.ariaLabelledby?t+this.ariaLabelledby:e}_skipPredicate(){return!1}static \u0275fac=function(t){return new(t||a)};static \u0275cmp=C({type:a,selectors:[["mat-autocomplete"]],contentQueries:function(t,n,l){if(t&1&&De(l,Ce,5)(l,oi,5),t&2){let d;R(d=A())&&(n.options=d),R(d=A())&&(n.optionGroups=d)}},viewQuery:function(t,n){if(t&1&&Fe(ct,7)(Wi,5),t&2){let l;R(l=A())&&(n.template=l.first),R(l=A())&&(n.panel=l.first)}},hostAttrs:[1,"mat-mdc-autocomplete"],inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:[2,"autoActiveFirstOption","autoActiveFirstOption",O],autoSelectActiveOption:[2,"autoSelectActiveOption","autoSelectActiveOption",O],requireSelection:[2,"requireSelection","requireSelection",O],panelWidth:"panelWidth",disableRipple:[2,"disableRipple","disableRipple",O],classList:[0,"class","classList"],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",O]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},exportAs:["matAutocomplete"],features:[ae([{provide:si,useExisting:a}])],ngContentSelectors:Xi,decls:1,vars:0,consts:[["panel",""],["role","listbox",1,"mat-mdc-autocomplete-panel","mdc-menu-surface","mdc-menu-surface--open",3,"id"]],template:function(t,n){t&1&&(Pe(),mt(0,Hi,3,17,"ng-template"))},styles:[`div.mat-mdc-autocomplete-panel{width:100%;max-height:256px;visibility:hidden;transform-origin:center top;overflow:auto;padding:8px 0;box-sizing:border-box;position:relative;border-radius:var(--mat-autocomplete-container-shape, var(--mat-sys-corner-extra-small));box-shadow:var(--mat-autocomplete-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12));background-color:var(--mat-autocomplete-background-color, var(--mat-sys-surface-container))}@media(forced-colors: active){div.mat-mdc-autocomplete-panel{outline:solid 1px}}.cdk-overlay-pane:not(.mat-mdc-autocomplete-panel-above) div.mat-mdc-autocomplete-panel{border-top-left-radius:0;border-top-right-radius:0}.mat-mdc-autocomplete-panel-above div.mat-mdc-autocomplete-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:center bottom}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-visible{visibility:visible}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-hidden,.cdk-overlay-pane:has(>.mat-mdc-autocomplete-hidden){visibility:hidden;pointer-events:none}@keyframes _mat-autocomplete-enter{from{opacity:0;transform:scaleY(0.8)}to{opacity:1;transform:none}}.mat-autocomplete-panel-animations-enabled{animation:_mat-autocomplete-enter 120ms cubic-bezier(0, 0, 0.2, 1)}mat-autocomplete{display:none}
`],encapsulation:2,changeDetection:0})}return a})();var $i={provide:xt,useExisting:at(()=>Qe),multi:!0};var ji=new Ie("mat-autocomplete-scroll-strategy",{providedIn:"root",factory:()=>{let a=h(Oe);return()=>Jt(a)}}),Qe=(()=>{class a{_environmentInjector=h(rt);_element=h(Re);_injector=h(Oe);_viewContainerRef=h(ht);_zone=h(st);_changeDetectorRef=h(Be);_dir=h(Xe,{optional:!0});_formField=h(Xt,{optional:!0,host:!0});_viewportRuler=h(Yt);_scrollStrategy=h(ji);_renderer=h(dt);_animationsDisabled=$e();_defaults=h(Pi,{optional:!0});_overlayRef=null;_portal;_componentDestroyed=!1;_initialized=new ke;_keydownSubscription;_outsideClickSubscription;_cleanupWindowBlur;_previousValue=null;_valueOnAttach=null;_valueOnLastKeydown=null;_positionStrategy;_manuallyFloatingLabel=!1;_closingActionsSubscription;_viewportSubscription=j.EMPTY;_breakpointObserver=h(Nt);_handsetLandscapeSubscription=j.EMPTY;_canOpenOnNextFocus=!0;_valueBeforeAutoSelection;_pendingAutoselectedOption=null;_closeKeyEventStream=new ke;_overlayPanelClass=Ft(this._defaults?.overlayPanelClass||[]);_windowBlurHandler=()=>{this._canOpenOnNextFocus=this.panelOpen||!this._hasFocus()};_onChange=()=>{};_onTouched=()=>{};autocomplete;position="auto";connectedTo;autocompleteAttribute="off";autocompleteDisabled=!1;constructor(){}_aboveClass="mat-mdc-autocomplete-panel-above";ngAfterViewInit(){this._initialized.next(),this._initialized.complete(),this._cleanupWindowBlur=this._renderer.listen("window","blur",this._windowBlurHandler)}ngOnChanges(e){e.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){this._cleanupWindowBlur?.(),this._handsetLandscapeSubscription.unsubscribe(),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete(),this._clearFromModal()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}_overlayAttached=!1;openPanel(){this._openPanelInternal()}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this._zone.run(()=>{this.autocomplete.closed.emit()}),this.autocomplete._latestOpeningTrigger===this&&(this.autocomplete._isOpen=!1,this.autocomplete._latestOpeningTrigger=null),this._overlayAttached=!1,this._pendingAutoselectedOption=null,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._updatePanelState(),this._componentDestroyed||this._changeDetectorRef.detectChanges(),this._trackedModal&&fe(this._trackedModal,"aria-owns",this.autocomplete.id))}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return G(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe(we(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe(we(()=>this._overlayAttached)):v()).pipe(Q(e=>e instanceof li?e:null))}optionSelections=Ze(()=>{let e=this.autocomplete?this.autocomplete.options:null;return e?e.changes.pipe(tt(e),x(()=>G(...e.map(t=>t.onSelectionChange)))):this._initialized.pipe(x(()=>this.optionSelections))});get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return new E(e=>{let t=l=>{let d=Vt(l),M=this._formField?this._formField.getConnectedOverlayOrigin().nativeElement:null,Ge=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;this._overlayAttached&&d!==this._element.nativeElement&&!this._hasFocus()&&(!M||!M.contains(d))&&(!Ge||!Ge.contains(d))&&this._overlayRef&&!this._overlayRef.overlayElement.contains(d)&&e.next(l)},n=[this._renderer.listen("document","click",t),this._renderer.listen("document","auxclick",t),this._renderer.listen("document","touchend",t)];return()=>{n.forEach(l=>l())}})}writeValue(e){Promise.resolve(null).then(()=>this._assignOptionValue(e))}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this._element.nativeElement.disabled=e}_handleKeydown(e){let t=e,n=t.keyCode,l=_e(t);if(n===27&&!l&&t.preventDefault(),this._valueOnLastKeydown=this._element.nativeElement.value,this.activeOption&&n===13&&this.panelOpen&&!l)this.activeOption._selectViaInteraction(),this._resetActiveItem(),t.preventDefault();else if(this.autocomplete){let d=this.autocomplete._keyManager.activeItem,M=n===38||n===40;n===9||M&&!l&&this.panelOpen?this.autocomplete._keyManager.onKeydown(t):M&&this._canOpen()&&this._openPanelInternal(this._valueOnLastKeydown),(M||this.autocomplete._keyManager.activeItem!==d)&&(this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0),this.autocomplete.autoSelectActiveOption&&this.activeOption&&(this._pendingAutoselectedOption||(this._valueBeforeAutoSelection=this._valueOnLastKeydown),this._pendingAutoselectedOption=this.activeOption,this._assignOptionValue(this.activeOption.value)))}}_handleInput(e){let t=e.target,n=t.value;if(t.type==="number"&&(n=n==""?null:parseFloat(n)),this._previousValue!==n){if(this._previousValue=n,this._pendingAutoselectedOption=null,(!this.autocomplete||!this.autocomplete.requireSelection)&&this._onChange(n),!n)this._clearPreviousSelectedOption(null,!1);else if(this.panelOpen&&!this.autocomplete.requireSelection){let l=this.autocomplete.options?.find(d=>d.selected);if(l){let d=this._getDisplayValue(l.value);n!==d&&l.deselect(!1)}}if(this._canOpen()&&this._hasFocus()){let l=this._valueOnLastKeydown??this._element.nativeElement.value;this._valueOnLastKeydown=null,this._openPanelInternal(l)}}}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(this._previousValue),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_handleClick(){this._canOpen()&&!this.panelOpen&&this._openPanelInternal()}_hasFocus(){return Pt()===this._element.nativeElement}_floatLabel(e=!1){this._formField&&this._formField.floatLabel==="auto"&&(e?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField&&(this._formField.floatLabel="auto"),this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){let e=new E(n=>{lt(()=>{n.next()},{injector:this._environmentInjector})}),t=this.autocomplete.options?.changes.pipe(it(()=>this._positionStrategy.reapplyLastPosition()),et(0))??v();return G(e,t).pipe(x(()=>this._zone.run(()=>{let n=this.panelOpen;return this._resetActiveItem(),this._updatePanelState(),this._changeDetectorRef.detectChanges(),this.panelOpen&&this._overlayRef.updatePosition(),n!==this.panelOpen&&(this.panelOpen?this._emitOpened():this.autocomplete.closed.emit()),this.panelClosingActions})),Je(1)).subscribe(n=>this._setValueAndClose(n))}_emitOpened(){this.autocomplete.opened.emit()}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_getDisplayValue(e){let t=this.autocomplete;return t&&t.displayWith?t.displayWith(e):e}_assignOptionValue(e){let t=this._getDisplayValue(e);e==null&&this._clearPreviousSelectedOption(null,!1),this._updateNativeInputValue(t??"")}_updateNativeInputValue(e){this._formField?this._formField._control.value=e:this._element.nativeElement.value=e,this._previousValue=e}_setValueAndClose(e){let t=this.autocomplete,n=e?e.source:this._pendingAutoselectedOption;n?(this._clearPreviousSelectedOption(n),this._assignOptionValue(n.value),this._onChange(n.value),t._emitSelectEvent(n),this._element.nativeElement.focus()):t.requireSelection&&this._element.nativeElement.value!==this._valueOnAttach&&(this._clearPreviousSelectedOption(null),this._assignOptionValue(null),this._onChange(null)),this.closePanel()}_clearPreviousSelectedOption(e,t){this.autocomplete?.options?.forEach(n=>{n!==e&&n.selected&&n.deselect(t)})}_openPanelInternal(e=this._element.nativeElement.value){if(this._attachOverlay(e),this._floatLabel(),this._trackedModal){let t=this.autocomplete.id;He(this._trackedModal,"aria-owns",t)}}_attachOverlay(e){if(!this.autocomplete)return;let t=this._overlayRef;t?(this._positionStrategy.setOrigin(this._getConnectedElement()),t.updateSize({width:this._getPanelWidth()})):(this._portal=new Kt(this.autocomplete.template,this._viewContainerRef,{id:this._formField?.getLabelId()}),t=ii(this._injector,this._getOverlayConfig()),this._overlayRef=t,this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&t&&t.updateSize({width:this._getPanelWidth()})}),this._handsetLandscapeSubscription=this._breakpointObserver.observe(Bt.HandsetLandscape).subscribe(l=>{l.matches?this._positionStrategy.withFlexibleDimensions(!0).withGrowAfterOpen(!0).withViewportMargin(8):this._positionStrategy.withFlexibleDimensions(!1).withGrowAfterOpen(!1).withViewportMargin(0)})),t&&!t.hasAttached()&&(t.attach(this._portal),this._valueOnAttach=e,this._valueOnLastKeydown=null,this._closingActionsSubscription=this._subscribeToClosingActions());let n=this.panelOpen;this.autocomplete._isOpen=this._overlayAttached=!0,this.autocomplete._latestOpeningTrigger=this,this.autocomplete._setColor(this._formField?.color),this._updatePanelState(),this._applyModalPanelOwnership(),this.panelOpen&&n!==this.panelOpen&&this._emitOpened()}_handlePanelKeydown=e=>{(e.keyCode===27&&!_e(e)||e.keyCode===38&&_e(e,"altKey"))&&(this._pendingAutoselectedOption&&(this._updateNativeInputValue(this._valueBeforeAutoSelection??""),this._pendingAutoselectedOption=null),this._closeKeyEventStream.next(),this._resetActiveItem(),e.stopPropagation(),e.preventDefault())};_updatePanelState(){if(this.autocomplete._setVisibility(),this.panelOpen){let e=this._overlayRef;this._keydownSubscription||(this._keydownSubscription=e.keydownEvents().subscribe(this._handlePanelKeydown)),this._outsideClickSubscription||(this._outsideClickSubscription=e.outsidePointerEvents().subscribe())}else this._keydownSubscription?.unsubscribe(),this._outsideClickSubscription?.unsubscribe(),this._keydownSubscription=this._outsideClickSubscription=void 0}_getOverlayConfig(){return new ei({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir??void 0,hasBackdrop:this._defaults?.hasBackdrop,backdropClass:this._defaults?.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this._overlayPanelClass,disableAnimations:this._animationsDisabled})}_getOverlayPosition(){let e=ti(this._injector,this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1).withPopoverLocation("inline");return this._setStrategyPositions(e),this._positionStrategy=e,e}_setStrategyPositions(e){let t=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],n=this._aboveClass,l=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:n},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:n}],d;this.position==="above"?d=l:this.position==="below"?d=t:d=[...t,...l],e.withPositions(d)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){let e=this.autocomplete;if(e.autoActiveFirstOption){let t=-1;for(let n=0;n<e.options.length;n++)if(!e.options.get(n).disabled){t=n;break}e._keyManager.setActiveItem(t)}else e._keyManager.setActiveItem(-1)}_canOpen(){let e=this._element.nativeElement;return!e.readOnly&&!e.disabled&&!this.autocompleteDisabled}_scrollToOption(e){let t=this.autocomplete,n=ci(e,t.options,t.optionGroups);if(e===0&&n===1)t._setScrollTop(0);else if(t.panel){let l=t.options.toArray()[e];if(l){let d=l._getHostElement(),M=di(d.offsetTop,d.offsetHeight,t._getScrollTop(),t.panel.nativeElement.offsetHeight);t._setScrollTop(M)}}}_trackedModal=null;_applyModalPanelOwnership(){let e=this._element.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!e)return;let t=this.autocomplete.id;this._trackedModal&&fe(this._trackedModal,"aria-owns",t),He(e,"aria-owns",t),this._trackedModal=e}_clearFromModal(){if(this._trackedModal){let e=this.autocomplete.id;fe(this._trackedModal,"aria-owns",e),this._trackedModal=null}}static \u0275fac=function(t){return new(t||a)};static \u0275dir=Ae({type:a,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-mdc-autocomplete-trigger"],hostVars:7,hostBindings:function(t,n){t&1&&p("focusin",function(){return n._handleFocus()})("blur",function(){return n._onTouched()})("input",function(d){return n._handleInput(d)})("keydown",function(d){return n._handleKeydown(d)})("click",function(){return n._handleClick()}),t&2&&J("autocomplete",n.autocompleteAttribute)("role",n.autocompleteDisabled?null:"combobox")("aria-autocomplete",n.autocompleteDisabled?null:"list")("aria-activedescendant",n.panelOpen&&n.activeOption?n.activeOption.id:null)("aria-expanded",n.autocompleteDisabled?null:n.panelOpen.toString())("aria-controls",n.autocompleteDisabled||!n.panelOpen||n.autocomplete==null?null:n.autocomplete.id)("aria-haspopup",n.autocompleteDisabled?null:"listbox")},inputs:{autocomplete:[0,"matAutocomplete","autocomplete"],position:[0,"matAutocompletePosition","position"],connectedTo:[0,"matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:[0,"autocomplete","autocompleteAttribute"],autocompleteDisabled:[2,"matAutocompleteDisabled","autocompleteDisabled",O]},exportAs:["matAutocompleteTrigger"],features:[ae([$i]),ot]})}return a})(),Di=(()=>{class a{static \u0275fac=function(t){return new(t||a)};static \u0275mod=Z({type:a});static \u0275inj=Y({imports:[ai,H,Zt,H,ce]})}return a})();function Zi(a,i){if(a&1&&(r(0,"mat-option",8),o(1),s()),a&2){let e=i.$implicit;m("value",e),c(),w(e)}}function Ji(a,i){if(a&1&&(r(0,"mat-option",8),o(1),s()),a&2){let e=i.$implicit;m("value",e),c(),w(e)}}function ea(a,i){if(a&1&&(r(0,"mat-option",8),o(1),s()),a&2){let e=i.$implicit;m("value",e),c(),w(e)}}var xe=class a{constructor(){this.fb=h(oe);this.advancedSearchService=h(U);this.search=new S;this.saveSearch=new S;this.reset=new S;this.referenceSuggestions$=new E(()=>{});this.addressSuggestions$=new E(()=>{});this.ownerSuggestions$=new E(()=>{})}ngOnInit(){this.searchForm=this.fb.group({reference:[""],address:[""],category:[""],status:[""],minArea:[null,[We.min(0)]],maxArea:[null,[We.min(0)]],ownerName:[""]}),this.initSuggestions()}initSuggestions(){this.referenceSuggestions$=this.searchForm.get("reference").valueChanges.pipe(q(300),K(),x(i=>i?this.advancedSearchService.getSuggestions(i,"reference"):v([]))),this.addressSuggestions$=this.searchForm.get("address").valueChanges.pipe(q(300),K(),x(i=>i?this.advancedSearchService.getSuggestions(i,"address"):v([]))),this.ownerSuggestions$=this.searchForm.get("ownerName").valueChanges.pipe(q(300),K(),x(i=>i?this.advancedSearchService.getSuggestions(i,"owner"):v([])))}performSearch(){if(this.searchForm.valid){let i=this.searchForm.value;this.search.emit(i)}}saveAsFavorite(){if(this.searchForm.valid){let i=this.searchForm.value,e=prompt("Entrez un nom pour sauvegarder cette recherche:");e&&this.advancedSearchService.saveSearchAsFavorite(e,i).subscribe({next:()=>{console.log("Recherche sauvegard\xE9e avec succ\xE8s")},error:t=>{console.error("Erreur lors de la sauvegarde de la recherche:",t)}})}}resetForm(){this.searchForm.reset(),this.reset.emit()}static{this.\u0275fac=function(e){return new(e||a)}}static{this.\u0275cmp=C({type:a,selectors:[["app-advanced-search"]],outputs:{search:"search",saveSearch:"saveSearch",reset:"reset"},decls:103,vars:11,consts:[["refAuto","matAutocomplete"],["addrAuto","matAutocomplete"],["ownerAuto","matAutocomplete"],[1,"advanced-search-card"],[1,"search-form",3,"ngSubmit","formGroup"],[1,"full-width"],["matInput","","formControlName","reference","placeholder","Ex: AB-123-456",3,"matAutocomplete"],["matSuffix",""],[3,"value"],["matInput","","formControlName","address","placeholder","Entrez une adresse",3,"matAutocomplete"],[1,"form-row"],[1,"half-width"],["formControlName","category"],["value",""],["value","residential"],["value","commercial"],["value","industrial"],["value","agricultural"],["value","mixed-use"],["value","public-space"],["formControlName","status"],["value","available"],["value","occupied"],["value","disputed"],["value","reserved"],["matInput","","type","number","formControlName","minArea","min","0"],["matInput","","type","number","formControlName","maxArea","min","0"],["matInput","","formControlName","ownerName","placeholder","Nom du propri\xE9taire",3,"matAutocomplete"],[1,"form-actions"],["type","submit","mat-raised-button","","color","primary",3,"disabled"],["type","button","mat-stroked-button","","color","accent",3,"click"],["type","button","mat-stroked-button","",3,"click"]],template:function(e,t){if(e&1){let n=I();r(0,"mat-card",3)(1,"mat-card-header")(2,"mat-card-title")(3,"mat-icon"),o(4,"search"),s(),r(5,"span"),o(6,"Recherche Avanc\xE9e de Parcelles"),s()(),r(7,"mat-card-subtitle"),o(8,"Filtrer les parcelles selon plusieurs crit\xE8res"),s()(),r(9,"mat-card-content")(10,"form",4),p("ngSubmit",function(){return _(n),f(t.performSearch())}),r(11,"mat-form-field",5)(12,"mat-label"),o(13,"R\xE9f\xE9rence cadastrale"),s(),g(14,"input",6),r(15,"mat-icon",7),o(16,"search"),s(),r(17,"mat-autocomplete",null,0),W(19,Zi,2,2,"mat-option",8,ee),V(21,"async"),s()(),r(22,"mat-form-field",5)(23,"mat-label"),o(24,"Adresse"),s(),g(25,"input",9),r(26,"mat-icon",7),o(27,"location_on"),s(),r(28,"mat-autocomplete",null,1),W(30,Ji,2,2,"mat-option",8,ee),V(32,"async"),s()(),r(33,"div",10)(34,"mat-form-field",11)(35,"mat-label"),o(36,"Cat\xE9gorie"),s(),r(37,"mat-select",12)(38,"mat-option",13),o(39,"Toutes"),s(),r(40,"mat-option",14),o(41,"R\xE9sidentiel"),s(),r(42,"mat-option",15),o(43,"Commercial"),s(),r(44,"mat-option",16),o(45,"Industriel"),s(),r(46,"mat-option",17),o(47,"Agricole"),s(),r(48,"mat-option",18),o(49,"Mixte"),s(),r(50,"mat-option",19),o(51,"Espace public"),s()()(),r(52,"mat-form-field",11)(53,"mat-label"),o(54,"Statut"),s(),r(55,"mat-select",20)(56,"mat-option",13),o(57,"Tous"),s(),r(58,"mat-option",21),o(59,"Disponible"),s(),r(60,"mat-option",22),o(61,"Occup\xE9"),s(),r(62,"mat-option",23),o(63,"Contest\xE9"),s(),r(64,"mat-option",24),o(65,"R\xE9serv\xE9"),s()()()(),r(66,"div",10)(67,"mat-form-field",11)(68,"mat-label"),o(69,"Superficie min (m\xB2)"),s(),g(70,"input",25),r(71,"mat-icon",7),o(72,"straighten"),s()(),r(73,"mat-form-field",11)(74,"mat-label"),o(75,"Superficie max (m\xB2)"),s(),g(76,"input",26),r(77,"mat-icon",7),o(78,"straighten"),s()()(),r(79,"mat-form-field",5)(80,"mat-label"),o(81,"Nom du propri\xE9taire"),s(),g(82,"input",27),r(83,"mat-icon",7),o(84,"person"),s(),r(85,"mat-autocomplete",null,2),W(87,ea,2,2,"mat-option",8,ee),V(89,"async"),s()(),r(90,"div",28)(91,"button",29)(92,"mat-icon"),o(93,"search"),s(),o(94," Rechercher "),s(),r(95,"button",30),p("click",function(){return _(n),f(t.saveAsFavorite())}),r(96,"mat-icon"),o(97,"bookmark"),s(),o(98," Sauvegarder "),s(),r(99,"button",31),p("click",function(){return _(n),f(t.resetForm())}),r(100,"mat-icon"),o(101,"refresh"),s(),o(102," R\xE9initialiser "),s()()()()()}if(e&2){let n=te(18),l=te(29),d=te(86);c(10),m("formGroup",t.searchForm),c(4),m("matAutocomplete",n),c(5),X(ne(21,5,t.referenceSuggestions$)),c(6),m("matAutocomplete",l),c(5),X(ne(32,7,t.addressSuggestions$)),c(52),m("matAutocomplete",d),c(5),X(ne(89,9,t.ownerSuggestions$)),c(4),m("disabled",t.searchForm.invalid)}},dependencies:[D,le,Et,Tt,It,kt,wt,At,Rt,Ot,ge,Ht,zt,Wt,ve,$t,ye,hi,Ce,Oi,N,Gt,L,be,F,de,me,pe,ue,he,Ei,Di,Vi,Qe,H,vt],styles:[".advanced-search-card[_ngcontent-%COMP%]{margin:16px;box-shadow:0 2px 10px #0000001a}.search-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.form-row[_ngcontent-%COMP%]{display:flex;gap:16px}.full-width[_ngcontent-%COMP%]{width:100%}.half-width[_ngcontent-%COMP%]{width:calc(50% - 8px)}.form-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:flex-end;margin-top:8px}@media(max-width:768px){.form-row[_ngcontent-%COMP%]{flex-direction:column}.half-width[_ngcontent-%COMP%]{width:100%}.form-actions[_ngcontent-%COMP%]{flex-direction:column}}"],changeDetection:0})}};var ta=()=>[5,10,20,50],Ni=a=>["/parcels",a];function ia(a,i){a&1&&(r(0,"div",1),g(1,"mat-progress-spinner",2),r(2,"p"),o(3,"Chargement des r\xE9sultats..."),s()())}function aa(a,i){a&1&&(r(0,"th",18),o(1,"R\xE9f\xE9rence"),s())}function na(a,i){if(a&1&&(r(0,"td",19)(1,"a",20),o(2),s()()),a&2){let e=i.$implicit;c(),m("routerLink",Ue(2,Ni,e.id)),c(),P(" ",e.reference_cadastrale," ")}}function ra(a,i){a&1&&(r(0,"th",18),o(1,"Adresse"),s())}function sa(a,i){if(a&1&&(r(0,"td",19),o(1),s()),a&2){let e=i.$implicit;c(),w(e.address)}}function oa(a,i){a&1&&(r(0,"th",18),o(1,"Superficie (m\xB2)"),s())}function la(a,i){if(a&1&&(r(0,"td",19),o(1),V(2,"number"),s()),a&2){let e=i.$implicit;c(),w(gt(2,1,e.area,"1.2-2"))}}function ca(a,i){a&1&&(r(0,"th",18),o(1,"Cat\xE9gorie"),s())}function da(a,i){if(a&1&&(r(0,"td",19)(1,"span",21),o(2),s()()),a&2){let e=i.$implicit,t=u(2);c(),ie("background-color",t.getCategoryColor(e.category)),c(),P(" ",t.getCategoryLabel(e.category)," ")}}function ha(a,i){a&1&&(r(0,"th",18),o(1,"Statut"),s())}function ma(a,i){if(a&1&&(r(0,"td",19)(1,"span",22),o(2),s()()),a&2){let e=i.$implicit,t=u(2);c(),ie("background-color",t.getStatusColor(e.status)),c(),P(" ",t.getStatusLabel(e.status)," ")}}function ua(a,i){a&1&&(r(0,"th",18),o(1,"Propri\xE9taire"),s())}function pa(a,i){if(a&1&&(r(0,"td",19),o(1),s()),a&2){let e=i.$implicit;c(),P(" ",e.owners&&e.owners.length>0?e.owners[0].full_name:"Non assign\xE9"," ")}}function _a(a,i){a&1&&(r(0,"th",23),o(1,"Actions"),s())}function fa(a,i){if(a&1){let e=I();r(0,"td",19)(1,"button",24)(2,"mat-icon"),o(3,"visibility"),s()(),r(4,"button",25),p("click",function(){let n=_(e).$implicit,l=u(2);return f(l.viewOnMap(n))}),r(5,"mat-icon"),o(6,"map"),s()(),r(7,"button",26),p("click",function(){let n=_(e).$implicit,l=u(2);return f(l.exportParcel(n))}),r(8,"mat-icon"),o(9,"get_app"),s()()()}if(a&2){let e=i.$implicit;c(),m("routerLink",Ue(1,Ni,e.id))}}function ga(a,i){a&1&&g(0,"tr",27)}function va(a,i){a&1&&g(0,"tr",28)}function ba(a,i){if(a&1){let e=I();r(0,"div",3)(1,"table",4),T(2,5),y(3,aa,2,0,"th",6)(4,na,3,4,"td",7),k(),T(5,8),y(6,ra,2,0,"th",6)(7,sa,2,1,"td",7),k(),T(8,9),y(9,oa,2,0,"th",6)(10,la,3,4,"td",7),k(),T(11,10),y(12,ca,2,0,"th",6)(13,da,3,3,"td",7),k(),T(14,11),y(15,ha,2,0,"th",6)(16,ma,3,3,"td",7),k(),T(17,12),y(18,ua,2,0,"th",6)(19,pa,2,1,"td",7),k(),T(20,13),y(21,_a,2,0,"th",14)(22,fa,10,3,"td",7),k(),y(23,ga,1,0,"tr",15)(24,va,1,0,"tr",16),s()(),r(25,"mat-paginator",17),p("page",function(n){_(e);let l=u();return f(l.onPageChange(n))}),s()}if(a&2){let e=u();c(),m("dataSource",e.data()),c(22),m("matHeaderRowDef",e.displayedColumns()),c(),m("matRowDefColumns",e.displayedColumns()),c(),m("length",e.totalItems())("pageSize",e.pageSize())("pageSizeOptions",ft(6,ta))}}var Te=class a{constructor(){this.data=se([]);this.totalItems=se(0);this.isLoading=se(!1);this.pageSize=b(10);this.viewOnMapEvent=re();this.exportParcelEvent=re();this.pageChange=re();this.displayedColumns=b(["reference_cadastrale","address","area","category","status","owner","actions"]);this.categoryColors={residential:"#3887be",commercial:"#bc3de3",industrial:"#ff8100",agricultural:"#8fa900","mixed-use":"#99008a","public-space":"#007d79"};this.categoryLabels={residential:"R\xE9sidentiel",commercial:"Commercial",industrial:"Industriel",agricultural:"Agricole","mixed-use":"Mixte","public-space":"Espace public"};this.statusColors={available:"#4caf50",occupied:"#2196f3",disputed:"#f44336",reserved:"#ff9800"};this.statusLabels={available:"Disponible",occupied:"Occup\xE9",disputed:"Contest\xE9",reserved:"R\xE9serv\xE9"}}getCategoryColor(i){return this.categoryColors[i]||"#808080"}getCategoryLabel(i){return this.categoryLabels[i]||i}getStatusColor(i){return this.statusColors[i]||"#9e9e9e"}getStatusLabel(i){return this.statusLabels[i]||i}viewOnMap(i){this.viewOnMapEvent.emit(i)}exportParcel(i){this.exportParcelEvent.emit(i)}onPageChange(i){this.pageChange.emit(i)}static{this.\u0275fac=function(e){return new(e||a)}}static{this.\u0275cmp=C({type:a,selectors:[["app-search-results"]],inputs:{data:[1,"data"],totalItems:[1,"totalItems"],isLoading:[1,"isLoading"]},outputs:{viewOnMapEvent:"viewOnMapEvent",exportParcelEvent:"exportParcelEvent",pageChange:"pageChange"},decls:12,vars:2,consts:[[1,"results-card"],[1,"loading-container"],["mode","indeterminate"],[1,"table-container"],["mat-table","","matSort","",1,"mat-elevation-z8","results-table",3,"dataSource"],["matColumnDef","reference_cadastrale"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","address"],["matColumnDef","area"],["matColumnDef","category"],["matColumnDef","status"],["matColumnDef","owner"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"page","length","pageSize","pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"parcel-link",3,"routerLink"],[1,"category-badge"],[1,"status-badge"],["mat-header-cell",""],["mat-icon-button","","matTooltip","Voir les d\xE9tails",3,"routerLink"],["mat-icon-button","","matTooltip","Voir sur la carte",3,"click"],["mat-icon-button","","matTooltip","Exporter",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,t){e&1&&(r(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title")(3,"mat-icon"),o(4,"list_alt"),s(),r(5,"span"),o(6,"R\xE9sultats de la recherche"),s()(),r(7,"mat-card-subtitle"),o(8),s()(),r(9,"mat-card-content"),B(10,ia,4,0,"div",1)(11,ba,26,7),s()()),e&2&&(c(8),P(" ",t.totalItems()," parcelle(s) trouv\xE9e(s) "),c(2),z(t.isLoading()?10:11))},dependencies:[D,yt,Mi,ui,_i,bi,fi,pi,Si,gi,vi,Ci,yi,F,de,me,pe,ue,he,L,be,N,jt,ri,ni,Me,xi,wi,Ti,ki,Se,qt,bt],styles:[".results-card[_ngcontent-%COMP%]{margin:16px;overflow:hidden}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 0}.table-container[_ngcontent-%COMP%]{overflow-x:auto;margin-bottom:16px}.results-table[_ngcontent-%COMP%]{width:100%;background:#fff}.parcel-link[_ngcontent-%COMP%]{text-decoration:none;color:#1976d2;font-weight:500}.parcel-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.category-badge[_ngcontent-%COMP%], .status-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;color:#fff;font-size:.8em;font-weight:500}.paginator-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}@media(max-width:768px){.results-table[_ngcontent-%COMP%]{font-size:.8em}.mat-mdc-cell[_ngcontent-%COMP%]{padding:8px 4px}}"],changeDetection:0})}};function Sa(a,i){if(a&1){let e=I();r(0,"app-search-results",4),p("viewOnMapEvent",function(n){_(e);let l=u();return f(l.onViewOnMap(n))})("exportParcelEvent",function(n){_(e);let l=u();return f(l.onExportParcel(n))})("pageChange",function(n){_(e);let l=u();return f(l.onPageChange(n))}),s()}if(a&2){let e=u();m("data",e.results())("totalItems",e.totalItems())("isLoading",e.searching())}}var Li=class a{constructor(){this.fb=h(oe);this.parcelService=h(Ii);this.advancedSearchService=h(U);this.router=h(Ct);this.searching=b(!1);this.hasSearched=b(!1);this.results=b([]);this.totalItems=b(0);this.currentPage=b(1);this.pageSize=b(10);this.statusOptions=[{value:"available",label:"Disponible"},{value:"occupied",label:"Occup\xE9e"},{value:"disputed",label:"Contest\xE9e"},{value:"reserved",label:"R\xE9serv\xE9e"}];this.searchForm=this.fb.group({reference:[""],address:[""],zone:[""],status:[""],min_area:[null],max_area:[null]})}onSearch(){this.searching.set(!0),this.hasSearched.set(!0);let i=this.searchForm.value,e={};i.reference&&(e.reference=i.reference),i.address&&(e.address=i.address),i.zone&&(e.zone=i.zone),i.status&&(e.status=i.status),i.min_area&&(e.min_area=i.min_area),i.max_area&&(e.max_area=i.max_area);let t={reference:e.reference,address:e.address,status:e.status,minArea:e.min_area,maxArea:e.max_area,limit:this.pageSize(),offset:(this.currentPage()-1)*this.pageSize()};this.advancedSearchService.searchParcels(t).subscribe({next:n=>{this.results.set(n.items),this.totalItems.set(n.total),this.searching.set(!1)},error:n=>{console.error("Erreur lors de la recherche:",n),this.results.set([]),this.searching.set(!1)}})}onAdvancedSearch(i){this.searching.set(!0),this.hasSearched.set(!0);let e=Ke(qe({},i),{limit:this.pageSize(),offset:(this.currentPage()-1)*this.pageSize()});this.advancedSearchService.searchParcels(e).subscribe({next:t=>{this.results.set(t.items),this.totalItems.set(t.total),this.searching.set(!1)},error:t=>{console.error("Erreur lors de la recherche avanc\xE9e:",t),this.results.set([]),this.searching.set(!1)}})}onSaveSearch(i){this.advancedSearchService.saveSearchAsFavorite(i.name,i.criteria).subscribe({next:()=>{console.log("Recherche sauvegard\xE9e avec succ\xE8s")},error:e=>{console.error("Erreur lors de la sauvegarde de la recherche:",e)}})}onReset(){this.searchForm.reset({reference:"",address:"",zone:"",status:"",min_area:null,max_area:null}),this.results.set([]),this.hasSearched.set(!1),this.currentPage.set(1),this.totalItems.set(0)}onPageChange(i){this.currentPage.set(i.pageIndex+1),this.pageSize.set(i.pageSize),this.onSearch()}onViewOnMap(i){this.router.navigate(["/map"],{queryParams:{lat:i.coordinates?.lat,lng:i.coordinates?.lng,zoom:16}})}onExportParcel(i){console.log("Export de la parcelle:",i)}getStatusColor(i){return i&&{available:"#4caf50",occupied:"#ff9800",disputed:"#f44336",reserved:"#2196f3"}[i]||"#9e9e9e"}getStatusLabel(i){return i?{available:"Disponible",occupied:"Occup\xE9e",disputed:"Contest\xE9e",reserved:"R\xE9serv\xE9e"}[i]||i:"Non d\xE9fini"}static{this.\u0275fac=function(e){return new(e||a)}}static{this.\u0275cmp=C({type:a,selectors:[["app-search"]],decls:6,vars:1,consts:[[1,"search-container"],[1,"header"],[3,"search","saveSearch","reset"],[3,"data","totalItems","isLoading"],[3,"viewOnMapEvent","exportParcelEvent","pageChange","data","totalItems","isLoading"]],template:function(e,t){e&1&&(r(0,"div",0)(1,"div",1)(2,"h1"),o(3,"Recherche avanc\xE9e de parcelles"),s()(),r(4,"app-advanced-search",2),p("search",function(l){return t.onAdvancedSearch(l)})("saveSearch",function(l){return t.onSaveSearch(l)})("reset",function(){return t.onReset()}),s(),B(5,Sa,1,3,"app-search-results",3),s()),e&2&&(c(5),z(t.hasSearched()?5:-1))},dependencies:[D,le,Mt,F,ge,ve,ye,N,L,Se,mi,Me,xe,Te],styles:[".search-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:2rem}.search-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-bottom:2rem}.search-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.75rem;font-weight:500}.search-container[_ngcontent-%COMP%]   .search-card[_ngcontent-%COMP%]{margin-bottom:2rem}.search-container[_ngcontent-%COMP%]   .search-card[_ngcontent-%COMP%]   .search-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.5rem;margin-bottom:1.5rem}.search-container[_ngcontent-%COMP%]   .search-card[_ngcontent-%COMP%]   .search-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;padding-top:1rem;border-top:1px solid rgba(0,0,0,.12)}.search-container[_ngcontent-%COMP%]   .search-card[_ngcontent-%COMP%]   .search-actions[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{display:inline-block;margin-right:.5rem}.search-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   .results-count[_ngcontent-%COMP%]{font-size:.875rem;font-weight:400;color:#0009;margin-left:.5rem}.search-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:1.5rem;margin-top:1.5rem}.search-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   .parcel-card[_ngcontent-%COMP%]{cursor:pointer;transition:transform .2s,box-shadow .2s}.search-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   .parcel-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 4px 12px #00000026}.search-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   .parcel-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{margin-bottom:1rem}.search-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   .parcel-card[_ngcontent-%COMP%]   .parcel-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.search-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   .parcel-card[_ngcontent-%COMP%]   .parcel-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.search-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   .parcel-card[_ngcontent-%COMP%]   .parcel-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.25rem;width:1.25rem;height:1.25rem;color:#0000008a}.search-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   .parcel-card[_ngcontent-%COMP%]   .parcel-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{height:24px;font-size:.75rem;color:#fff}.search-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   .parcel-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{padding:.5rem 1rem;border-top:1px solid rgba(0,0,0,.12)}.search-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem}.search-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:4rem;width:4rem;height:4rem;color:#00000042;margin-bottom:1rem}.search-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.125rem;color:#0009;margin-bottom:2rem}@media(max-width:768px){.search-container[_ngcontent-%COMP%]{padding:1rem}.search-container[_ngcontent-%COMP%]   .search-card[_ngcontent-%COMP%]   .search-grid[_ngcontent-%COMP%], .search-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   .results-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"],changeDetection:0})}};export{Li as SearchComponent};
