import{a as T,b as k,c as A}from"./chunk-RQXWK6VS.js";import"./chunk-PQNUUMDX.js";import{a as H,b as $}from"./chunk-JNBWNSPZ.js";import{a as z,b as N,c as j,d as q,e as B,f as G,g as U,h as F,i as J,j as W,l as K}from"./chunk-3DRFPNYN.js";import"./chunk-QLHDTFGW.js";import{a as R}from"./chunk-TAVIRTLO.js";import"./chunk-RSTPHI64.js";import"./chunk-QDNYLZKO.js";import{a as b,b as E,c as O,f as P,h as w}from"./chunk-FY6NZ6SC.js";import{a as I,b as L}from"./chunk-UUJ2B6HP.js";import{$ as D}from"./chunk-AQZ5PN4T.js";import{a as x}from"./chunk-NYFRATJG.js";import{p as y}from"./chunk-3AYM6UTQ.js";import{Ib as l,Jb as e,Kb as n,Lb as g,Pb as u,Qb as _,Xa as o,Y as S,Yb as h,ba as M,ic as v,kc as i,lb as C,lc as m,mc as c,rb as d,sa as p}from"./chunk-E7AQ6X4Y.js";import"./chunk-EQDQRRRY.js";var f=class a{constructor(){this.api=M(x);this.endpoint="/api/monitoring"}getSystemStatus(){return this.api.get(`${this.endpoint}/status`)}getServerMetrics(){return this.api.get(`${this.endpoint}/metrics`)}getRecentLogs(t=20){return this.api.get(`${this.endpoint}/logs`,{limit:t})}getSystemAlerts(){return this.api.get(`${this.endpoint}/alerts`)}healthCheck(){return this.api.get(`${this.endpoint}/health`)}getUsageStats(){return this.api.get(`${this.endpoint}/usage`)}static{this.\u0275fac=function(s){return new(s||a)}}static{this.\u0275prov=S({token:a,factory:a.\u0275fac,providedIn:"root"})}};function X(a,t){a&1&&(e(0,"th",27),i(1,"Horodatage"),n())}function Y(a,t){if(a&1&&(e(0,"td",28),i(1),n()),a&2){let s=t.$implicit,r=h();o(),m(r.formatDate(s.timestamp))}}function Z(a,t){a&1&&(e(0,"th",27),i(1,"Niveau"),n())}function tt(a,t){if(a&1&&(e(0,"td",28)(1,"span",29),i(2),n()()),a&2){let s=t.$implicit;o(),v("error",s.level==="ERROR")("warn",s.level==="WARNING"),o(),c(" ",s.level," ")}}function et(a,t){a&1&&(e(0,"th",27),i(1,"Message"),n())}function nt(a,t){if(a&1&&(e(0,"td",28),i(1),n()),a&2){let s=t.$implicit;o(),m(s.message)}}function it(a,t){a&1&&(e(0,"th",27),i(1,"Source"),n())}function rt(a,t){if(a&1&&(e(0,"td",28),i(1),n()),a&2){let s=t.$implicit;o(),m(s.source)}}function at(a,t){a&1&&g(0,"tr",30)}function ot(a,t){a&1&&g(0,"tr",31)}var Q=class a{constructor(){this.monitoringService=M(f);this.systemStatus=p({overall_status:"ok",database_status:"ok",api_status:"ok",connectivity_status:"ok",last_check:new Date().toISOString()});this.serverMetrics=p({cpu_usage_percent:0,memory_usage_percent:0,disk_usage_percent:0,temperature_celsius:0,network_io_mb_per_sec:0,uptime_seconds:0});this.recentLogs=p([]);this.displayedColumns=p(["timestamp","level","message","source"])}ngOnInit(){this.loadSystemStatus(),this.loadServerMetrics(),this.loadRecentLogs()}loadSystemStatus(){this.monitoringService.getSystemStatus().subscribe({next:t=>{this.systemStatus.set(t)},error:t=>{console.error("Erreur lors du chargement du statut syst\xE8me:",t)}})}loadServerMetrics(){this.monitoringService.getServerMetrics().subscribe({next:t=>{this.serverMetrics.set(t)},error:t=>{console.error("Erreur lors du chargement des m\xE9triques serveur:",t)}})}loadRecentLogs(){this.monitoringService.getRecentLogs(10).subscribe({next:t=>{this.recentLogs.set(t)},error:t=>{console.error("Erreur lors du chargement des logs:",t)}})}getStatusLabel(t){return{ok:"Op\xE9rationnel",warning:"Avertissement",error:"Erreur",critical:"Critique",pending:"En attente"}[t]||t}getMetricColor(t){return t>80?"warn":t>90?"accent":"primary"}formatDate(t){return new Date(t).toLocaleString("fr-FR")}static{this.\u0275fac=function(s){return new(s||a)}}static{this.\u0275cmp=C({type:a,selectors:[["app-system-monitoring"]],decls:113,vars:26,consts:[[1,"monitoring-dashboard"],[1,"dashboard-header"],[1,"status-section"],["cols","4","rowHeight","150px","gutterSize","16px"],[1,"status-card"],[1,"status-content"],[1,"status-icon"],[1,"status-info"],[1,"status-value"],[1,"metrics-section"],[1,"metrics-card"],[1,"metrics-grid"],[1,"metric-item"],["mode","determinate",3,"value","color"],[1,"temperature-value"],[1,"logs-section"],[1,"logs-card"],[1,"logs-table-container"],["mat-table","",1,"mat-elevation-z8","logs-table",3,"dataSource"],["matColumnDef","timestamp"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","level"],["matColumnDef","message"],["matColumnDef","source"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"log-level"],["mat-header-row",""],["mat-row",""]],template:function(s,r){s&1&&(e(0,"div",0)(1,"header",1)(2,"h1")(3,"mat-icon"),i(4,"monitor_heart"),n(),e(5,"span"),i(6,"Surveillance Syst\xE8me"),n()(),e(7,"p"),i(8,"Surveillance en temps r\xE9el de l'\xE9tat du syst\xE8me"),n()(),e(9,"section",2)(10,"mat-grid-list",3)(11,"mat-grid-tile")(12,"mat-card",4)(13,"mat-card-content",5)(14,"div",6)(15,"mat-icon"),i(16),n()(),e(17,"div",7)(18,"h3"),i(19,"Statut G\xE9n\xE9ral"),n(),e(20,"p",8),i(21),n()()()()(),e(22,"mat-grid-tile")(23,"mat-card",4)(24,"mat-card-content",5)(25,"div",6)(26,"mat-icon"),i(27,"storage"),n()(),e(28,"div",7)(29,"h3"),i(30,"Base de donn\xE9es"),n(),e(31,"p",8),i(32),n()()()()(),e(33,"mat-grid-tile")(34,"mat-card",4)(35,"mat-card-content",5)(36,"div",6)(37,"mat-icon"),i(38,"memory"),n()(),e(39,"div",7)(40,"h3"),i(41,"Serveur API"),n(),e(42,"p",8),i(43),n()()()()(),e(44,"mat-grid-tile")(45,"mat-card",4)(46,"mat-card-content",5)(47,"div",6)(48,"mat-icon"),i(49,"cloud_queue"),n()(),e(50,"div",7)(51,"h3"),i(52,"Connectivit\xE9"),n(),e(53,"p",8),i(54),n()()()()()()(),e(55,"section",9)(56,"mat-card",10)(57,"mat-card-header")(58,"mat-card-title")(59,"mat-icon"),i(60,"bar_chart"),n(),e(61,"span"),i(62,"M\xE9triques Serveur"),n()()(),e(63,"mat-card-content")(64,"div",11)(65,"div",12)(66,"h4"),i(67,"Utilisation CPU"),n(),g(68,"mat-progress-bar",13),e(69,"p"),i(70),n()(),e(71,"div",12)(72,"h4"),i(73,"Utilisation RAM"),n(),g(74,"mat-progress-bar",13),e(75,"p"),i(76),n()(),e(77,"div",12)(78,"h4"),i(79,"Espace disque"),n(),g(80,"mat-progress-bar",13),e(81,"p"),i(82),n()(),e(83,"div",12)(84,"h4"),i(85,"Temp\xE9rature"),n(),e(86,"p",14),i(87),n()()()()()(),e(88,"section",15)(89,"mat-card",16)(90,"mat-card-header")(91,"mat-card-title")(92,"mat-icon"),i(93,"history"),n(),e(94,"span"),i(95,"Journal des \xC9v\xE9nements Critiques"),n()()(),e(96,"mat-card-content")(97,"div",17)(98,"table",18),u(99,19),d(100,X,2,0,"th",20)(101,Y,2,1,"td",21),_(),u(102,22),d(103,Z,2,0,"th",20)(104,tt,3,5,"td",21),_(),u(105,23),d(106,et,2,0,"th",20)(107,nt,2,1,"td",21),_(),u(108,24),d(109,it,2,0,"th",20)(110,rt,2,1,"td",21),_(),d(111,at,1,0,"tr",25)(112,ot,1,0,"tr",26),n()()()()()()),s&2&&(o(12),v("warning",r.systemStatus().overall_status==="warning")("error",r.systemStatus().overall_status==="error"),o(3),v("warning",r.systemStatus().overall_status==="warning")("error",r.systemStatus().overall_status==="error"),o(),c(" ",r.systemStatus().overall_status==="ok"?"check_circle":r.systemStatus().overall_status==="warning"?"warning":"error"," "),o(5),m(r.getStatusLabel(r.systemStatus().overall_status)),o(11),m(r.getStatusLabel(r.systemStatus().database_status)),o(11),m(r.getStatusLabel(r.systemStatus().api_status)),o(11),m(r.getStatusLabel(r.systemStatus().connectivity_status)),o(14),l("value",r.serverMetrics().cpu_usage_percent)("color",r.getMetricColor(r.serverMetrics().cpu_usage_percent)),o(2),c("",r.serverMetrics().cpu_usage_percent,"%"),o(4),l("value",r.serverMetrics().memory_usage_percent)("color",r.getMetricColor(r.serverMetrics().memory_usage_percent)),o(2),c("",r.serverMetrics().memory_usage_percent,"%"),o(4),l("value",r.serverMetrics().disk_usage_percent)("color",r.getMetricColor(r.serverMetrics().disk_usage_percent)),o(2),c("",r.serverMetrics().disk_usage_percent,"%"),o(5),c("",r.serverMetrics().temperature_celsius,"\xB0C"),o(11),l("dataSource",r.recentLogs()),o(13),l("matHeaderRowDef",r.displayedColumns()),o(),l("matRowDefColumns",r.displayedColumns()))},dependencies:[y,w,b,O,P,E,A,k,T,$,H,L,I,D,R,K,z,j,U,q,N,F,B,G,J,W],styles:[".monitoring-dashboard[_ngcontent-%COMP%]{padding:24px;max-width:1400px;margin:0 auto}.dashboard-header[_ngcontent-%COMP%]{margin-bottom:24px}.dashboard-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin:0 0 8px;font-size:24px;font-weight:500;color:#1a237e}.dashboard-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#1976d2}.dashboard-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666}.status-section[_ngcontent-%COMP%]{margin-bottom:24px}.status-card[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center;justify-content:center}.status-card.warning[_ngcontent-%COMP%]{border-left:4px solid #ff9800}.status-card.error[_ngcontent-%COMP%]{border-left:4px solid #f44336}.status-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;width:100%;height:100%}.status-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:50px;height:50px;border-radius:50%;background-color:#f5f5f5}.status-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:28px;width:28px;height:28px}.status-icon[_ngcontent-%COMP%]   mat-icon.warning[_ngcontent-%COMP%]{color:#ff9800}.status-icon[_ngcontent-%COMP%]   mat-icon.error[_ngcontent-%COMP%]{color:#f44336}.status-info[_ngcontent-%COMP%]{flex:1}.status-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 4px;font-size:14px;font-weight:500;color:#666}.status-info[_ngcontent-%COMP%]   .status-value[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:500;color:#333}.metrics-section[_ngcontent-%COMP%]{margin-bottom:24px}.metrics-card[_ngcontent-%COMP%]   .mat-mdc-card-content[_ngcontent-%COMP%]{padding:16px}.metrics-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:24px}.metric-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 8px;font-size:14px;font-weight:500;color:#666}.metric-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0 0;font-size:16px;font-weight:500;color:#333}.metric-item[_ngcontent-%COMP%]   .temperature-value[_ngcontent-%COMP%]{font-size:20px;color:#1976d2}.logs-section[_ngcontent-%COMP%]{margin-bottom:24px}.logs-table-container[_ngcontent-%COMP%]{overflow-x:auto}.logs-table[_ngcontent-%COMP%]{width:100%}.logs-table[_ngcontent-%COMP%]   .log-level[_ngcontent-%COMP%]{font-weight:500}.logs-table[_ngcontent-%COMP%]   .log-level.error[_ngcontent-%COMP%]{color:#f44336}.logs-table[_ngcontent-%COMP%]   .log-level.warn[_ngcontent-%COMP%]{color:#ff9800}@media(max-width:1024px){.metrics-grid[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}}@media(max-width:768px){.monitoring-dashboard[_ngcontent-%COMP%]{padding:16px}mat-grid-list[_ngcontent-%COMP%]   mat-grid-tile[_ngcontent-%COMP%]{height:120px!important}.metrics-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"],changeDetection:0})}};export{Q as SystemMonitoringComponent};
