import{b as Q,c as W}from"./chunk-E7OICD5F.js";import{a as K}from"./chunk-OFBHONAA.js";import{b as G,c as $,e as H,f as U,i as J}from"./chunk-YPBVTN56.js";import{a as ie,b as re}from"./chunk-3WYC6ROS.js";import{a as ne,b as oe}from"./chunk-XMY2MG46.js";import"./chunk-QDNYLZKO.js";import{a as D,b as q,c as z,d as A,f as B,h as j}from"./chunk-FY6NZ6SC.js";import{b as O,d as m,g as I,h as k,k as N,m as R,n as L,s as T,u as V}from"./chunk-4TEKNYBZ.js";import{a as ee,b as te}from"./chunk-UUJ2B6HP.js";import{a as F}from"./chunk-XNCRNYUB.js";import{$ as Z,W as X,Y}from"./chunk-AQZ5PN4T.js";import{c as S,d as y}from"./chunk-JWWLDGKM.js";import"./chunk-NYFRATJG.js";import"./chunk-3AYM6UTQ.js";import{Bb as v,Cb as c,Db as u,Ib as C,Jb as t,Kb as e,Lb as g,Wb as b,Xa as a,Yb as p,ba as f,kc as n,lb as w,lc as d,sa as h}from"./chunk-E7AQ6X4Y.js";import{c as P}from"./chunk-EQDQRRRY.js";function le(o,l){if(o&1&&(t(0,"mat-error"),n(1),e()),o&2){let r=p();a(),d(r.getErrorMessage("username"))}}function me(o,l){if(o&1&&(t(0,"mat-error"),n(1),e()),o&2){let r=p();a(),d(r.getErrorMessage("email"))}}function se(o,l){if(o&1&&(t(0,"mat-error"),n(1),e()),o&2){let r=p();a(),d(r.getErrorMessage("full_name"))}}function de(o,l){if(o&1&&(t(0,"mat-error"),n(1),e()),o&2){let r=p();a(),d(r.getErrorMessage("password"))}}function ce(o,l){if(o&1&&(t(0,"mat-error"),n(1),e()),o&2){let r=p();a(),d(r.getErrorMessage("confirmPassword"))}}function ue(o,l){if(o&1&&(t(0,"div",11)(1,"mat-icon"),n(2,"error"),e(),t(3,"span"),n(4),e()()),o&2){let r=p();a(4),d(r.errorMessage())}}function ge(o,l){o&1&&(g(0,"mat-spinner",15),t(1,"span"),n(2,"Inscription en cours..."),e())}function pe(o,l){o&1&&(t(0,"span"),n(1,"S'inscrire"),e())}var ae=class o{constructor(){this.fb=f(T);this.authService=f(F);this.router=f(S);this.snackBar=f(ne);this.hidePassword=h(!0);this.hideConfirmPassword=h(!0);this.loading=h(!1);this.errorMessage=h(null);this.registerForm=this.fb.nonNullable.group({username:["",[m.required,m.minLength(3),m.maxLength(50)]],email:["",[m.required,m.email]],full_name:["",[m.required,m.minLength(2)]],password:["",[m.required,m.minLength(6)]],confirmPassword:["",[m.required]]},{validators:this.passwordMatchValidator})}passwordMatchValidator(l){let r=l.get("password"),i=l.get("confirmPassword");return!r||!i||r.value===i.value?null:{passwordMismatch:!0}}togglePasswordVisibility(){this.hidePassword.set(!this.hidePassword())}toggleConfirmPasswordVisibility(){this.hideConfirmPassword.set(!this.hideConfirmPassword())}onSubmit(){if(this.registerForm.invalid){this.registerForm.markAllAsTouched();return}this.loading.set(!0),this.errorMessage.set(null);let i=this.registerForm.getRawValue(),{confirmPassword:l}=i,r=P(i,["confirmPassword"]);this.authService.register(r).subscribe({next:()=>{this.loading.set(!1),this.snackBar.open("Inscription r\xE9ussie ! Vous pouvez maintenant vous connecter.","Fermer",{duration:5e3,panelClass:["success-snackbar"]}),this.router.navigate(["/login"])},error:s=>{this.loading.set(!1),this.errorMessage.set(s.message||"Erreur lors de l'inscription")}})}getErrorMessage(l){let r=this.registerForm.get(l);return r?.hasError("required")?"Ce champ est requis":r?.hasError("minlength")?`Minimum ${r.getError("minlength").requiredLength} caract\xE8res requis`:r?.hasError("maxlength")?`Maximum ${r.getError("maxlength").requiredLength} caract\xE8res autoris\xE9s`:r?.hasError("email")?"Email invalide":l==="confirmPassword"&&this.registerForm.hasError("passwordMismatch")?"Les mots de passe ne correspondent pas":""}static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275cmp=w({type:o,selectors:[["app-register"]],decls:60,vars:15,consts:[[1,"register-container"],[1,"register-card"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","username","placeholder","Choisissez un nom d'utilisateur","autocomplete","username"],["matPrefix",""],["matInput","","type","email","formControlName","email","placeholder","votre@email.com","autocomplete","email"],["matInput","","formControlName","full_name","placeholder","Pr\xE9nom Nom","autocomplete","name"],["matInput","","formControlName","password","placeholder","Minimum 6 caract\xE8res","autocomplete","new-password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["matInput","","formControlName","confirmPassword","placeholder","R\xE9p\xE9tez votre mot de passe","autocomplete","new-password",3,"type"],[1,"error-message","mb-3"],["mat-raised-button","","color","primary","type","submit",1,"full-width",3,"disabled"],[1,"text-center","mt-3"],["routerLink","/login",1,"login-link"],["diameter","20"]],template:function(r,i){if(r&1&&(t(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title")(4,"h1"),n(5,"Inscription"),e()(),t(6,"mat-card-subtitle"),n(7," Cr\xE9ez votre compte SIU "),e()(),t(8,"mat-card-content")(9,"form",2),b("ngSubmit",function(){return i.onSubmit()}),t(10,"mat-form-field",3)(11,"mat-label"),n(12,"Nom d'utilisateur"),e(),g(13,"input",4),t(14,"mat-icon",5),n(15,"person"),e(),c(16,le,2,1,"mat-error"),e(),t(17,"mat-form-field",3)(18,"mat-label"),n(19,"Email"),e(),g(20,"input",6),t(21,"mat-icon",5),n(22,"email"),e(),c(23,me,2,1,"mat-error"),e(),t(24,"mat-form-field",3)(25,"mat-label"),n(26,"Nom complet"),e(),g(27,"input",7),t(28,"mat-icon",5),n(29,"badge"),e(),c(30,se,2,1,"mat-error"),e(),t(31,"mat-form-field",3)(32,"mat-label"),n(33,"Mot de passe"),e(),g(34,"input",8),t(35,"mat-icon",5),n(36,"lock"),e(),t(37,"button",9),b("click",function(){return i.togglePasswordVisibility()}),t(38,"mat-icon"),n(39),e()(),c(40,de,2,1,"mat-error"),e(),t(41,"mat-form-field",3)(42,"mat-label"),n(43,"Confirmer le mot de passe"),e(),g(44,"input",10),t(45,"mat-icon",5),n(46,"lock_outline"),e(),t(47,"button",9),b("click",function(){return i.toggleConfirmPasswordVisibility()}),t(48,"mat-icon"),n(49),e()(),c(50,ce,2,1,"mat-error"),e(),c(51,ue,5,1,"div",11),t(52,"button",12),c(53,ge,3,0)(54,pe,2,0,"span"),e(),t(55,"div",13)(56,"p"),n(57," D\xE9j\xE0 un compte ? "),t(58,"a",14),n(59,"Se connecter"),e()()()()()()()),r&2){let s,_,M,x,E;a(9),C("formGroup",i.registerForm),a(7),u((s=i.registerForm.get("username"))!=null&&s.invalid&&((s=i.registerForm.get("username"))!=null&&s.touched)?16:-1),a(7),u((_=i.registerForm.get("email"))!=null&&_.invalid&&((_=i.registerForm.get("email"))!=null&&_.touched)?23:-1),a(7),u((M=i.registerForm.get("full_name"))!=null&&M.invalid&&((M=i.registerForm.get("full_name"))!=null&&M.touched)?30:-1),a(4),C("type",i.hidePassword()?"password":"text"),a(3),v("aria-label","Afficher le mot de passe"),a(2),d(i.hidePassword()?"visibility_off":"visibility"),a(),u((x=i.registerForm.get("password"))!=null&&x.invalid&&((x=i.registerForm.get("password"))!=null&&x.touched)?40:-1),a(4),C("type",i.hideConfirmPassword()?"password":"text"),a(3),v("aria-label","Afficher la confirmation"),a(2),d(i.hideConfirmPassword()?"visibility_off":"visibility"),a(),u((E=i.registerForm.get("confirmPassword"))!=null&&E.touched&&i.registerForm.hasError("passwordMismatch")?50:-1),a(),u(i.errorMessage()?51:-1),a(),C("disabled",i.loading()),a(),u(i.loading()?53:54)}},dependencies:[V,N,O,I,k,L,R,y,j,D,z,B,A,q,K,J,G,$,H,U,W,Q,Z,Y,X,te,ee,re,ie,oe],styles:[".register-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);padding:1rem}.register-card[_ngcontent-%COMP%]{width:100%;max-width:500px;padding:2rem;box-shadow:0 8px 32px #0000001a;border-radius:16px}.register-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-bottom:2rem}.register-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:600;margin:0;color:#333}.register-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{font-size:.95rem;color:#666;margin-top:.5rem}.register-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:0}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}mat-form-field[_ngcontent-%COMP%]{margin-bottom:.25rem}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem;background-color:#ffebee;border-radius:8px;color:#c62828;font-size:.875rem}.error-message[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.25rem;width:1.25rem;height:1.25rem}button[type=submit][_ngcontent-%COMP%]{margin-top:1rem;height:48px;font-size:1rem;font-weight:500;border-radius:8px;display:flex;align-items:center;justify-content:center;gap:.5rem}.login-link[_ngcontent-%COMP%]{color:#667eea;text-decoration:none;font-weight:500;transition:color .2s}.login-link[_ngcontent-%COMP%]:hover{color:#764ba2;text-decoration:underline}@media(max-width:600px){.register-card[_ngcontent-%COMP%]{padding:1.5rem}.register-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}}"]})}};export{ae as RegisterComponent};
