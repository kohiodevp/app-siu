import{b as U,c as $}from"./chunk-JBX6OC6U.js";import{a as H}from"./chunk-V6MGZ35S.js";import{b as A,c as B,e as G,f as R,i as j}from"./chunk-DEKAXLAX.js";import{a as Y,b as Z}from"./chunk-GWNY4E3S.js";import{a as k,b as D,c as T,d as z,f as q,h as V}from"./chunk-HFRGPHGK.js";import{b as y,d as g,g as E,h as w,k as O,m as F,n as L,s as N,u as I}from"./chunk-M2VBT7VT.js";import{a as W,b as X}from"./chunk-STMJJCCP.js";import{a as S}from"./chunk-IE4XPFBV.js";import{$ as Q,W as J,Y as K}from"./chunk-ZNVG5ZVS.js";import{c as v,d as P}from"./chunk-LMV7XNWS.js";import"./chunk-FBCHPQNP.js";import"./chunk-YGREV7VD.js";import{Bb as b,Cb as d,Db as s,Ib as M,Jb as e,Kb as t,Lb as h,Wb as _,Xa as a,Yb as C,ba as p,kc as i,lb as x,lc as c,sa as f}from"./chunk-E7AQ6X4Y.js";import"./chunk-EQDQRRRY.js";function te(o,l){if(o&1&&(e(0,"mat-error"),i(1),t()),o&2){let n=C();a(),c(n.getErrorMessage("username"))}}function ne(o,l){if(o&1&&(e(0,"mat-error"),i(1),t()),o&2){let n=C();a(),c(n.getErrorMessage("password"))}}function ie(o,l){if(o&1&&(e(0,"div",8)(1,"mat-icon"),i(2,"error"),t(),e(3,"span"),i(4),t()()),o&2){let n=C();a(4),c(n.errorMessage())}}function oe(o,l){o&1&&(h(0,"mat-spinner",12),e(1,"span"),i(2,"Connexion en cours..."),t())}function re(o,l){o&1&&(e(0,"span"),i(1,"Se connecter"),t())}var ee=class o{constructor(){this.fb=p(N);this.authService=p(S);this.router=p(v);this.hidePassword=f(!0);this.loading=f(!1);this.errorMessage=f(null);this.loginForm=this.fb.nonNullable.group({username:["",[g.required,g.minLength(3)]],password:["",[g.required,g.minLength(6)]]})}togglePasswordVisibility(){this.hidePassword.set(!this.hidePassword())}onSubmit(){if(this.loginForm.invalid){this.loginForm.markAllAsTouched();return}this.loading.set(!0),this.errorMessage.set(null);let l=this.loginForm.getRawValue();this.authService.login(l).subscribe({next:()=>{this.loading.set(!1)},error:n=>{this.loading.set(!1),this.errorMessage.set(n.message||"Erreur de connexion")}})}getErrorMessage(l){let n=this.loginForm.get(l);return n?.hasError("required")?"Ce champ est requis":n?.hasError("minlength")?`Minimum ${n.getError("minlength").requiredLength} caract\xE8res requis`:""}static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275cmp=x({type:o,selectors:[["app-login"]],decls:36,vars:9,consts:[[1,"login-container"],[1,"login-card"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","username","placeholder","Entrez votre nom d'utilisateur","autocomplete","username"],["matPrefix",""],["matInput","","formControlName","password","placeholder","Entrez votre mot de passe","autocomplete","current-password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],[1,"error-message","mb-3"],["mat-raised-button","","color","primary","type","submit",1,"full-width",3,"disabled"],[1,"text-center","mt-3"],["routerLink","/register",1,"register-link"],["diameter","20"]],template:function(n,r){if(n&1&&(e(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title")(4,"h1"),i(5,"Connexion"),t()(),e(6,"mat-card-subtitle"),i(7," Syst\xE8me d'Information Urbain "),t()(),e(8,"mat-card-content")(9,"form",2),_("ngSubmit",function(){return r.onSubmit()}),e(10,"mat-form-field",3)(11,"mat-label"),i(12,"Nom d'utilisateur"),t(),h(13,"input",4),e(14,"mat-icon",5),i(15,"person"),t(),d(16,te,2,1,"mat-error"),t(),e(17,"mat-form-field",3)(18,"mat-label"),i(19,"Mot de passe"),t(),h(20,"input",6),e(21,"mat-icon",5),i(22,"lock"),t(),e(23,"button",7),_("click",function(){return r.togglePasswordVisibility()}),e(24,"mat-icon"),i(25),t()(),d(26,ne,2,1,"mat-error"),t(),d(27,ie,5,1,"div",8),e(28,"button",9),d(29,oe,3,0)(30,re,2,0,"span"),t(),e(31,"div",10)(32,"p"),i(33," Pas encore de compte ? "),e(34,"a",11),i(35,"S'inscrire"),t()()()()()()()),n&2){let m,u;a(9),M("formGroup",r.loginForm),a(7),s((m=r.loginForm.get("username"))!=null&&m.invalid&&((m=r.loginForm.get("username"))!=null&&m.touched)?16:-1),a(4),M("type",r.hidePassword()?"password":"text"),a(3),b("aria-label","Afficher le mot de passe"),a(2),c(r.hidePassword()?"visibility_off":"visibility"),a(),s((u=r.loginForm.get("password"))!=null&&u.invalid&&((u=r.loginForm.get("password"))!=null&&u.touched)?26:-1),a(),s(r.errorMessage()?27:-1),a(),M("disabled",r.loading()),a(),s(r.loading()?29:30)}},dependencies:[I,O,y,E,w,L,F,P,V,k,T,q,z,D,H,j,A,B,G,R,$,U,Q,K,J,X,W,Z,Y],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);padding:1rem}.login-card[_ngcontent-%COMP%]{width:100%;max-width:450px;padding:2rem;box-shadow:0 8px 32px #0000001a;border-radius:16px}.login-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-bottom:2rem}.login-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:600;margin:0;color:#333}.login-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{font-size:.95rem;color:#666;margin-top:.5rem}.login-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:0}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}mat-form-field[_ngcontent-%COMP%]{margin-bottom:.5rem}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem;background-color:#ffebee;border-radius:8px;color:#c62828;font-size:.875rem}.error-message[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.25rem;width:1.25rem;height:1.25rem}button[type=submit][_ngcontent-%COMP%]{margin-top:1rem;height:48px;font-size:1rem;font-weight:500;border-radius:8px;display:flex;align-items:center;justify-content:center;gap:.5rem}.register-link[_ngcontent-%COMP%]{color:#667eea;text-decoration:none;font-weight:500;transition:color .2s}.register-link[_ngcontent-%COMP%]:hover{color:#764ba2;text-decoration:underline}@media(max-width:600px){.login-card[_ngcontent-%COMP%]{padding:1.5rem}.login-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}}"],changeDetection:0})}};export{ee as LoginComponent};
