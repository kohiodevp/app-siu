import{a as se,b as de,d as pe,f as me}from"./chunk-QM7RLUKA.js";import{a as ge,b as _e,c as ue,d as Ce}from"./chunk-3GNZGIER.js";import{a as gt}from"./chunk-BYAQRIZS.js";import{a as $t}from"./chunk-2XBNJKWF.js";import{c as It}from"./chunk-HZBF5Z2J.js";import"./chunk-PQNUUMDX.js";import{a as nt,b as Zt,c as te}from"./chunk-6DOQAXWL.js";import{a as At,b as zt,c as Lt,d as Bt,e as jt,f as Ht,g as Qt,h as qt,i as Gt,j as Wt,k as Yt,l as Jt,m as Kt}from"./chunk-3DRFPNYN.js";import{a as et,b as Xt}from"./chunk-TUX7OWEK.js";import{a as ae,b as oe,c as ie,d as re,e as le,f as ce,g as at}from"./chunk-MR57I2Q4.js";import{a as ee,b as ne}from"./chunk-D4D64KG6.js";import{d as Ft,h as Vt,i as Z}from"./chunk-M2B5FNU7.js";import{a as Ut,b as Rt,d as Nt,f as tt}from"./chunk-TC4NHXKF.js";import"./chunk-CVA3OUYK.js";import{b as Ot,c as Y}from"./chunk-E7OICD5F.js";import{a as W}from"./chunk-OFBHONAA.js";import{b as xt,f as ht,i as Pt}from"./chunk-YPBVTN56.js";import{a as K,b as X}from"./chunk-3WYC6ROS.js";import{a as yt,b as wt,c as St,d as Tt}from"./chunk-QECNG6W7.js";import"./chunk-AC4QEAXS.js";import{c as vt}from"./chunk-QLHDTFGW.js";import{a as kt}from"./chunk-TAVIRTLO.js";import{a as Dt}from"./chunk-RSTPHI64.js";import{a as Et}from"./chunk-4PMYLZD4.js";import"./chunk-XMY2MG46.js";import"./chunk-QDNYLZKO.js";import{a as Mt,h as bt}from"./chunk-FY6NZ6SC.js";import{t as G}from"./chunk-4TEKNYBZ.js";import{a as w,b as S}from"./chunk-UUJ2B6HP.js";import{$ as y,W as J,Y as I}from"./chunk-AQZ5PN4T.js";import{c as ft}from"./chunk-JWWLDGKM.js";import"./chunk-NYFRATJG.js";import{g as ut,p as Ct}from"./chunk-3AYM6UTQ.js";import{Bb as x,Cb as _,Db as u,Ec as N,Fb as _t,Gb as T,Hb as D,Hc as V,Ib as p,Ic as C,Jb as o,Kb as i,Lb as E,Pb as A,Qb as z,Sb as h,Wb as m,Xa as l,Yb as c,ac as Q,ba as k,bc as L,cc as B,ga as f,gc as q,ha as M,hc as dt,ic as pt,jc as F,kc as s,lb as v,lc as g,mc as b,rb as R,sa as P,tc as mt}from"./chunk-E7AQ6X4Y.js";import{a as U,b as $}from"./chunk-EQDQRRRY.js";var he=(a,e)=>e.key,Pe=(a,e)=>e.label;function Oe(a,e){a&1&&(o(0,"div",1),E(1,"mat-spinner",11),i())}function ve(a,e){if(a&1){let t=h();o(0,"th",14)(1,"mat-checkbox",15),m("change",function(r){f(t);let d=c(2);return M(r?d.toggleAllRows():null)}),i()()}if(a&2){let t=c(2);l(),p("checked",t.selection.hasValue()&&t.isAllSelected())("indeterminate",t.selection.hasValue()&&!t.isAllSelected()),x("aria-label","S\xE9lectionner toutes les lignes")}}function ye(a,e){if(a&1){let t=h();o(0,"td",16)(1,"mat-checkbox",17),m("click",function(r){return f(t),M(r.stopPropagation())})("change",function(r){let d=f(t).$implicit,O=c(2);return M(r?O.toggleRow(d):null)}),i()()}if(a&2){let t=e.$implicit,n=c(2);l(),p("checked",n.selection.isSelected(t)),x("aria-label","S\xE9lectionner la ligne")}}function we(a,e){a&1&&(A(0,4),R(1,ve,2,3,"th",12)(2,ye,2,2,"td",13),z())}function Se(a,e){if(a&1&&(o(0,"th",22),s(1),i()),a&2){let t=c(2).$implicit;F("align-"+(t.align||"left")),dt("width",t.width||"auto"),l(),b(" ",t.label," ")}}function Te(a,e){a&1&&R(0,Se,2,5,"th",21)}function De(a,e){if(a&1&&(o(0,"th",24),s(1),i()),a&2){let t=c(2).$implicit;F("align-"+(t.align||"left")),dt("width",t.width||"auto"),l(),b(" ",t.label," ")}}function ke(a,e){a&1&&R(0,De,2,5,"th",23)}function Ee(a,e){if(a&1&&(o(0,"span",26),s(1),i()),a&2){let t=c().$implicit,n=c().$implicit,r=c();p("ngClass",r.getBadgeClass(n,t)),l(),b(" ",r.formatCellValue(n,t)," ")}}function Fe(a,e){if(a&1&&(o(0,"mat-icon",27),s(1),i()),a&2){let t=c().$implicit,n=c().$implicit,r=c();p("ngClass",r.getBooleanIconClass(n,t)),l(),b(" ",r.getBooleanIconName(n,t)," ")}}function Ve(a,e){if(a&1&&s(0),a&2){let t=c().$implicit,n=c().$implicit,r=c();b(" ",r.formatCellValue(n,t)," ")}}function Ie(a,e){if(a&1&&(o(0,"td",25),_(1,Ee,2,2,"span",26)(2,Fe,2,2,"mat-icon",27)(3,Ve,1,1),i()),a&2){let t,n=e.$implicit,r=c().$implicit,d=c();F("align-"+(r.align||"left")+" "+d.getCellClass(r,n)),l(),u((t=r.type)==="badge"?1:t==="boolean"?2:3)}}function Ue(a,e){if(a&1&&(A(0,5),_(1,Te,1,0,"th",18)(2,ke,1,0,"th",19),R(3,Ie,4,3,"td",20),z()),a&2){let t=e.$implicit;p("matColumnDef",t.key),l(),u(t.sortable?1:2)}}function Re(a,e){a&1&&(o(0,"th",30),s(1," Actions "),i())}function Ne(a,e){if(a&1){let t=h();o(0,"button",34),m("click",function(r){f(t);let d=c().$implicit,O=c().$implicit,be=c(2);return M(be.executeAction(d,O,r))}),o(1,"mat-icon"),s(2),i()()}if(a&2){let t=c().$implicit,n=c().$implicit,r=c(2);p("color",t.color)("disabled",r.isActionDisabled(t,n))("matTooltip",r.getActionTooltip(t,n)),x("aria-label",t.label),l(2),g(t.icon)}}function $e(a,e){if(a&1&&_(0,Ne,3,5,"button",33),a&2){let t=e.$implicit,n=c().$implicit,r=c(2);u(r.isActionVisible(t,n)?0:-1)}}function Ae(a,e){if(a&1&&(o(0,"td",31)(1,"div",32),T(2,$e,1,1,null,null,Pe),i()()),a&2){let t=c(2);l(2),D(t.actions())}}function ze(a,e){a&1&&(A(0,6),R(1,Re,2,0,"th",28)(2,Ae,4,0,"td",29),z())}function Le(a,e){a&1&&E(0,"tr",35)}function Be(a,e){if(a&1&&E(0,"tr",36),a&2){let t=e.$implicit,n=c();pt("selected",n.selection.isSelected(t))}}function je(a,e){if(a&1&&(o(0,"tr",37)(1,"td",38)(2,"div",39)(3,"mat-icon"),s(4,"inbox"),i(),o(5,"p"),s(6),i()()()()),a&2){let t=c();l(),x("colspan",t.displayedColumns().length),l(5),g(t.noDataMessage())}}function He(a,e){if(a&1){let t=h();o(0,"mat-paginator",40),m("page",function(r){f(t);let d=c();return M(d.onPageChange(r))}),i()}if(a&2){let t=c();p("pageSize",t.pageSize())("pageSizeOptions",t.pageSizeOptions())("length",t.data().length)}}var ot=class a{constructor(){this.columns=C.required();this.data=C.required();this.actions=C([]);this.loading=C(!1);this.selectable=C(!1);this.showPagination=C(!0);this.pageSize=C(10);this.pageSizeOptions=C([5,10,25,50,100]);this.noDataMessage=C("Aucune donn\xE9e disponible");this.trackBy=C("id");this.selectionChange=V();this.sortChange=V();this.pageChange=V();this.dataSource=N(()=>{let e=new Kt(this.data());return this.paginator&&(e.paginator=this.paginator),this.sort&&(e.sort=this.sort),e});this.selection=new vt(!0,[]);this.displayedColumns=N(()=>{let e=[];return this.selectable()&&e.push("select"),e.push(...this.columns().map(t=>t.key)),this.actions().length>0&&e.push("actions"),e});this.trackByFn=(e,t)=>{let n=this.trackBy();return t[n]||e}}isAllSelected(){let e=this.selection.selected.length,t=this.data().length;return e===t}toggleAllRows(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.data()),this.selectionChange.emit(this.selection.selected)}toggleRow(e){this.selection.toggle(e),this.selectionChange.emit(this.selection.selected)}onSortChange(e){this.sortChange.emit(e)}onPageChange(e){this.pageChange.emit({pageIndex:e.pageIndex,pageSize:e.pageSize})}formatCellValue(e,t){let n=t[e.key];if(e.format)return e.format(n,t);switch(e.type){case"date":return n?new Date(n).toLocaleDateString("fr-FR"):"-";case"number":return n?.toLocaleString("fr-FR")||"0";case"boolean":return n?"Oui":"Non";default:return n?.toString()||"-"}}getCellClass(e,t){return typeof e.cellClass=="function"?e.cellClass(t):e.cellClass||""}isActionVisible(e,t){return e.visible?e.visible(t):!0}isActionDisabled(e,t){return e.disabled?e.disabled(t):!1}getActionTooltip(e,t){return typeof e.tooltip=="function"?e.tooltip(t):e.tooltip||e.label}executeAction(e,t,n){n.stopPropagation(),this.isActionDisabled(e,t)||e.action(t)}getBadgeClass(e,t){return`badge-${t[e.key]}`}getBooleanIconClass(e,t){return t[e.key]?"icon-success":"icon-error"}getBooleanIconName(e,t){return t[e.key]?"check_circle":"cancel"}static{this.\u0275fac=function(t){return new(t||a)}}static{this.\u0275cmp=v({type:a,selectors:[["app-data-table"]],viewQuery:function(t,n){if(t&1&&Q(et,5)(nt,5),t&2){let r;L(r=B())&&(n.paginator=r.first),L(r=B())&&(n.sort=r.first)}},inputs:{columns:[1,"columns"],data:[1,"data"],actions:[1,"actions"],loading:[1,"loading"],selectable:[1,"selectable"],showPagination:[1,"showPagination"],pageSize:[1,"pageSize"],pageSizeOptions:[1,"pageSizeOptions"],noDataMessage:[1,"noDataMessage"],trackBy:[1,"trackBy"]},outputs:{selectionChange:"selectionChange",sortChange:"sortChange",pageChange:"pageChange"},decls:12,vars:9,consts:[[1,"data-table-container"],[1,"loading-overlay"],[1,"table-wrapper"],["mat-table","","matSort","",1,"data-table",3,"matSortChange","dataSource"],["matColumnDef","select"],[3,"matColumnDef"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","data-row",3,"selected",4,"matRowDef","matRowDefColumns"],["class","mat-row no-data-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","S\xE9lectionner la page",3,"pageSize","pageSizeOptions","length"],["diameter","50"],["mat-header-cell","","class","select-column",4,"matHeaderCellDef"],["mat-cell","","class","select-column",4,"matCellDef"],["mat-header-cell","",1,"select-column"],[3,"change","checked","indeterminate"],["mat-cell","",1,"select-column"],[3,"click","change","checked"],["mat-header-cell","","mat-sort-header","",3,"class","width"],["mat-header-cell","",3,"class","width"],["mat-cell","",3,"class",4,"matCellDef"],["mat-header-cell","","mat-sort-header","",3,"class","width",4,"matHeaderCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-header-cell","",3,"class","width",4,"matHeaderCellDef"],["mat-header-cell",""],["mat-cell",""],[1,"badge",3,"ngClass"],[3,"ngClass"],["mat-header-cell","","class","actions-column",4,"matHeaderCellDef"],["mat-cell","","class","actions-column",4,"matCellDef"],["mat-header-cell","",1,"actions-column"],["mat-cell","",1,"actions-column"],[1,"actions-wrapper"],["mat-icon-button","",3,"color","disabled","matTooltip"],["mat-icon-button","",3,"click","color","disabled","matTooltip"],["mat-header-row",""],["mat-row","",1,"data-row"],[1,"mat-row","no-data-row"],[1,"no-data-cell"],[1,"no-data-message"],["showFirstLastButtons","","aria-label","S\xE9lectionner la page",3,"page","pageSize","pageSizeOptions","length"]],template:function(t,n){t&1&&(o(0,"div",0),_(1,Oe,2,0,"div",1),o(2,"div",2)(3,"table",3),m("matSortChange",function(d){return n.onSortChange(d)}),_(4,we,3,0,"ng-container",4),T(5,Ue,4,2,"ng-container",5,he),_(7,ze,3,0,"ng-container",6),R(8,Le,1,0,"tr",7)(9,Be,1,2,"tr",8)(10,je,7,2,"tr",9),i()(),_(11,He,1,3,"mat-paginator",10),i()),t&2&&(l(),u(n.loading()?1:-1),l(2),pt("loading",n.loading()),p("dataSource",n.dataSource()),l(),u(n.selectable()?4:-1),l(),D(n.columns()),l(2),u(n.actions().length>0?7:-1),l(),p("matHeaderRowDef",n.displayedColumns()),l(),p("matRowDefColumns",n.displayedColumns()),l(2),u(n.showPagination()&&n.data().length>0?11:-1))},dependencies:[Jt,At,Lt,Qt,Bt,zt,qt,jt,Ht,Gt,Wt,Yt,Xt,et,te,nt,Zt,ne,ee,y,J,S,w,kt,Dt,X,K,Ct,ut],styles:[".data-table-container[_ngcontent-%COMP%]{position:relative;width:100%}.data-table-container[_ngcontent-%COMP%]   .loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;background-color:#fffc;z-index:10;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}.data-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]{width:100%;overflow-x:auto;background-color:var(--mat-card-background-color);border-radius:8px;box-shadow:0 2px 4px #0000001a}.data-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]{width:100%}.data-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .data-table.loading[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}.data-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;color:var(--mat-text-primary);background-color:var(--mat-table-header-background-color);padding:16px;white-space:nowrap}.data-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   th.mat-sort-header-sorted[_ngcontent-%COMP%]{color:var(--mat-primary-color)}.data-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px;color:var(--mat-text-primary)}.data-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .align-left[_ngcontent-%COMP%]{text-align:left}.data-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .align-center[_ngcontent-%COMP%]{text-align:center}.data-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .align-right[_ngcontent-%COMP%]{text-align:right}.data-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .select-column[_ngcontent-%COMP%]{width:48px;padding:8px}.data-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .actions-column[_ngcontent-%COMP%]{width:auto;padding:8px}.data-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .actions-column[_ngcontent-%COMP%]   .actions-wrapper[_ngcontent-%COMP%]{display:flex;gap:4px;justify-content:flex-end}.data-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;border-radius:12px;font-size:12px;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.data-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .badge.badge-available[_ngcontent-%COMP%]{background-color:#e8f5e9;color:#2e7d32}.data-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .badge.badge-occupied[_ngcontent-%COMP%]{background-color:#ffebee;color:#c62828}.data-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .badge.badge-pending[_ngcontent-%COMP%]{background-color:#fff3e0;color:#ef6c00}.data-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .badge.badge-active[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1565c0}.data-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .icon-success[_ngcontent-%COMP%]{color:#4caf50}.data-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .icon-error[_ngcontent-%COMP%]{color:#f44336}.data-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .data-row[_ngcontent-%COMP%]{transition:background-color .2s}.data-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .data-row[_ngcontent-%COMP%]:hover{background-color:var(--mat-table-row-hover-background-color)}.data-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .data-row.selected[_ngcontent-%COMP%]{background-color:var(--mat-primary-50)}.data-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .no-data-row[_ngcontent-%COMP%]{height:200px}.data-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .no-data-row[_ngcontent-%COMP%]   .no-data-cell[_ngcontent-%COMP%]{text-align:center}.data-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .no-data-row[_ngcontent-%COMP%]   .no-data-cell[_ngcontent-%COMP%]   .no-data-message[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:16px;padding:32px;color:var(--mat-text-secondary)}.data-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .no-data-row[_ngcontent-%COMP%]   .no-data-cell[_ngcontent-%COMP%]   .no-data-message[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;opacity:.3}.data-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .no-data-row[_ngcontent-%COMP%]   .no-data-cell[_ngcontent-%COMP%]   .no-data-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px}.data-table-container[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]{border-top:1px solid var(--mat-divider-color);background-color:transparent}@media(max-width:768px){.data-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 8px;font-size:13px}.data-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .actions-column[_ngcontent-%COMP%]   .actions-wrapper[_ngcontent-%COMP%]{flex-direction:column}}@media(prefers-color-scheme:dark){.data-table-container[_ngcontent-%COMP%]   .loading-overlay[_ngcontent-%COMP%]{background-color:#000c}.data-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]{box-shadow:0 2px 4px #0000004d}.data-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .badge.badge-available[_ngcontent-%COMP%]{background-color:#1b5e20;color:#a5d6a7}.data-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .badge.badge-occupied[_ngcontent-%COMP%]{background-color:#b71c1c;color:#ef9a9a}.data-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .badge.badge-pending[_ngcontent-%COMP%]{background-color:#e65100;color:#ffcc80}.data-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   .badge.badge-active[_ngcontent-%COMP%]{background-color:#0d47a1;color:#90caf9}}"],changeDetection:0})}};var fe=(a,e)=>e.key,Qe=(a,e)=>e.value;function qe(a,e){if(a&1&&(o(0,"span",2),s(1),i()),a&2){let t=c();l(),g(t.activeFiltersCount())}}function Ge(a,e){if(a&1){let t=h();o(0,"mat-chip",10),m("removed",function(){let r=f(t).$implicit,d=c(2);return M(d.removeFilter(r.key))}),o(1,"span",11),s(2),i(),o(3,"span",12),s(4),i(),o(5,"button",13)(6,"mat-icon"),s(7,"cancel"),i()()()}if(a&2){let t=e.$implicit;p("removable",!0),x("aria-label","Filtre: "+t.label),l(2),b("",t.label,":"),l(2),g(t.displayValue),l(),x("aria-label","Supprimer le filtre "+t.label)}}function We(a,e){if(a&1&&(o(0,"div",4)(1,"mat-chip-set",8),T(2,Ge,8,5,"mat-chip",9,fe),i()()),a&2){let t=c();l(2),D(t.getActiveFilters())}}function Ye(a,e){if(a&1){let t=h();o(0,"button",17),m("click",function(){f(t);let r=c(2).$implicit,d=c();return M(d.removeFilter(r.key))}),o(1,"mat-icon"),s(2,"close"),i()()}if(a&2){let t=c(2).$implicit;x("aria-label","Effacer "+t.label)}}function Je(a,e){if(a&1){let t=h();o(0,"mat-form-field",14)(1,"mat-label"),s(2),i(),o(3,"input",15),m("input",function(r){f(t);let d=c().$implicit,O=c();return M(O.onFilterValueChange(d.key,r.target.value))}),i(),_(4,Ye,3,1,"button",16),i()}if(a&2){let t=c().$implicit,n=c();l(2),g(t.label),l(),p("placeholder",t.placeholder||"")("value",n.getFilterValue(t.key)||""),x("aria-label",t.label),l(),u(n.isFilterActive(t.key)?4:-1)}}function Ke(a,e){if(a&1&&(o(0,"mat-option",19),s(1),i()),a&2){let t=e.$implicit;p("value",t.value),l(),b(" ",t.label," ")}}function Xe(a,e){if(a&1){let t=h();o(0,"mat-form-field",14)(1,"mat-label"),s(2),i(),o(3,"mat-select",18),m("selectionChange",function(r){f(t);let d=c().$implicit,O=c();return M(O.onFilterValueChange(d.key,r.value))}),o(4,"mat-option",19),s(5,"-- Tous --"),i(),T(6,Ke,2,2,"mat-option",19,Qe),i()()}if(a&2){let t=c().$implicit,n=c();l(2),g(t.label),l(),p("value",n.getFilterValue(t.key)),x("aria-label",t.label),l(),p("value",null),l(2),D(t.options)}}function Ze(a,e){if(a&1){let t=h();o(0,"button",17),m("click",function(){f(t);let r=c(2).$implicit,d=c();return M(d.removeFilter(r.key))}),o(1,"mat-icon"),s(2,"close"),i()()}if(a&2){let t=c(2).$implicit;x("aria-label","Effacer "+t.label)}}function tn(a,e){if(a&1){let t=h();o(0,"mat-form-field",14)(1,"mat-label"),s(2),i(),o(3,"input",20),m("dateChange",function(r){f(t);let d=c().$implicit,O=c();return M(O.onFilterValueChange(d.key,r.value))}),i(),E(4,"mat-datepicker-toggle",21)(5,"mat-datepicker",null,0),_(7,Ze,3,1,"button",16),i()}if(a&2){let t=q(6),n=c().$implicit,r=c();l(2),g(n.label),l(),p("matDatepicker",t)("value",r.getFilterValue(n.key)),x("aria-label",n.label),l(),p("for",t),l(3),u(r.isFilterActive(n.key)?7:-1)}}function en(a,e){if(a&1&&(o(0,"div",6),_(1,Je,5,5,"mat-form-field",14)(2,Xe,8,4,"mat-form-field",14)(3,tn,8,6,"mat-form-field",14),i()),a&2){let t,n=e.$implicit;l(),u((t=n.type)==="text"?1:t==="select"?2:t==="date"?3:-1)}}function nn(a,e){if(a&1){let t=h();o(0,"div",7)(1,"button",22),m("click",function(){f(t);let r=c();return M(r.resetFilters())}),o(2,"mat-icon"),s(3,"refresh"),i(),s(4," R\xE9initialiser "),i()()}}var st=class a{constructor(){this.filters=C.required();this.title=C("Filtres");this.expanded=C(!1);this.showReset=C(!0);this.filterChange=V();this.filterValues=P({});this.activeFiltersCount=N(()=>{let e=this.filterValues();return Object.keys(e).filter(t=>{let n=e[t];return n!=null&&n!==""}).length})}onFilterValueChange(e,t){let n=this.filterValues(),r=$(U({},n),{[e]:t});this.filterValues.set(r),this.filterChange.emit(r)}resetFilters(){this.filterValues.set({}),this.filterChange.emit({})}removeFilter(e){let t=this.filterValues(),n=U({},t);delete n[e],this.filterValues.set(n),this.filterChange.emit(n)}getFilterValue(e){return this.filterValues()[e]}getSelectLabel(e,t){return e.options?.find(r=>r.value===t)?.label||t?.toString()||""}isFilterActive(e){let t=this.filterValues()[e];return t!=null&&t!==""}getActiveFilters(){let e=this.filterValues();return this.filters().filter(t=>this.isFilterActive(t.key)).map(t=>({key:t.key,label:t.label,displayValue:this.getDisplayValue(t,e[t.key])}))}getDisplayValue(e,t){return e.type==="select"?this.getSelectLabel(e,t):e.type==="date"?new Date(t).toLocaleDateString("fr-FR"):t?.toString()||""}static{this.\u0275fac=function(t){return new(t||a)}}static{this.\u0275cmp=v({type:a,selectors:[["app-filter-panel"]],inputs:{filters:[1,"filters"],title:[1,"title"],expanded:[1,"expanded"],showReset:[1,"showReset"]},outputs:{filterChange:"filterChange"},decls:14,vars:5,consts:[["picker",""],["aria-label","Panneau de filtres",1,"filter-panel",3,"expanded"],[1,"filter-badge"],[1,"filter-content"],[1,"active-filters"],[1,"filter-form"],[1,"filter-field"],[1,"filter-actions"],["aria-label","Filtres actifs"],[3,"removable"],[3,"removed","removable"],[1,"chip-label"],[1,"chip-value"],["matChipRemove",""],["appearance","outline"],["matInput","","type","text",3,"input","placeholder","value"],["matSuffix","","mat-icon-button",""],["matSuffix","","mat-icon-button","",3,"click"],[3,"selectionChange","value"],[3,"value"],["matInput","",3,"dateChange","matDatepicker","value"],["matSuffix","",3,"for"],["mat-stroked-button","","color","primary","aria-label","R\xE9initialiser tous les filtres",3,"click"]],template:function(t,n){t&1&&(o(0,"mat-expansion-panel",1)(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"mat-icon"),s(4,"filter_list"),i(),o(5,"span"),s(6),i(),_(7,qe,2,1,"span",2),i()(),o(8,"div",3),_(9,We,4,0,"div",4),o(10,"div",5),T(11,en,4,1,"div",6,fe),i(),_(13,nn,5,0,"div",7),i()()),t&2&&(p("expanded",n.expanded()),l(6),g(n.title()),l(),u(n.activeFiltersCount()>0?7:-1),l(2),u(n.activeFiltersCount()>0?9:-1),l(2),D(n.filters()),l(2),u(n.showReset()&&n.activeFiltersCount()>0?13:-1))},dependencies:[G,me,se,de,pe,W,Pt,xt,ht,Y,Ot,Z,Vt,Ft,Ce,ge,_e,ue,It,y,I,J,S,w,tt,Rt,Ut,Nt],styles:[".filter-panel[_ngcontent-%COMP%]{margin-bottom:16px;box-shadow:0 2px 4px #0000001a}.filter-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;font-weight:500}.filter-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--mat-primary-color)}.filter-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]   .filter-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;min-width:20px;height:20px;padding:0 6px;background-color:var(--mat-primary-color);color:#fff;border-radius:10px;font-size:12px;font-weight:600}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]{padding:16px 0}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .active-filters[_ngcontent-%COMP%]{margin-bottom:16px;padding-bottom:16px;border-bottom:1px solid var(--mat-divider-color)}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .active-filters[_ngcontent-%COMP%]   mat-chip-set[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]   .chip-label[_ngcontent-%COMP%]{font-weight:500;margin-right:4px}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .active-filters[_ngcontent-%COMP%]   mat-chip-set[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]   .chip-value[_ngcontent-%COMP%]{color:var(--mat-text-secondary)}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .active-filters[_ngcontent-%COMP%]   mat-chip-set[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]   button[matChipRemove][_ngcontent-%COMP%]{opacity:.7;transition:opacity .2s}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .active-filters[_ngcontent-%COMP%]   mat-chip-set[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]   button[matChipRemove][_ngcontent-%COMP%]:hover{opacity:1}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   .filter-field[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:16px;padding-top:16px;border-top:1px solid var(--mat-divider-color)}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}@media(max-width:768px){.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]{grid-template-columns:1fr}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}@media(prefers-color-scheme:dark){.filter-panel[_ngcontent-%COMP%]{box-shadow:0 2px 4px #0000004d}}"],changeDetection:0})}};function an(a,e){a&1&&E(0,"mat-spinner",2)}function on(a,e){a&1&&(o(0,"mat-icon"),s(1,"file_download"),i())}function rn(a,e){if(a&1&&(A(0),_(1,on,2,0,"mat-icon"),o(2,"span"),s(3),i(),o(4,"mat-icon",4),s(5,"arrow_drop_down"),i(),z()),a&2){let t=c();l(),u(t.showIcon()?1:-1),l(2),g(t.buttonText())}}function ln(a,e){if(a&1){let t=h();o(0,"button",6),m("click",function(){f(t);let r=c().$implicit,d=c();return M(d.onExport(r))}),o(1,"mat-icon"),s(2),i(),o(3,"div",7)(4,"span",8),s(5),i(),o(6,"span",9),s(7),i()()()}if(a&2){let t=c().$implicit,n=c();p("disabled",n.loading()),x("aria-label","Exporter en "+n.getFormatConfig(t).label),l(),F("format-icon format-"+t),l(),b(" ",n.getFormatConfig(t).icon," "),l(3),g(n.getFormatConfig(t).label),l(2),g(n.getFormatConfig(t).description)}}function cn(a,e){if(a&1&&_(0,ln,8,7,"button",5),a&2){let t=e.$implicit,n=c();u(n.isFormatAvailable(t)?0:-1)}}var j=class a{constructor(){this.availableFormats=C(["pdf","excel","csv"]);this.disabled=C(!1);this.buttonText=C("Exporter");this.showIcon=C(!0);this.export=V();this.loading=P(!1);this.formatConfig={pdf:{label:"PDF",icon:"picture_as_pdf",description:"Document PDF"},excel:{label:"Excel",icon:"table_chart",description:"Fichier Excel (.xlsx)"},csv:{label:"CSV",icon:"description",description:"Fichier CSV (.csv)"}}}onExport(e){this.loading()||this.export.emit(e)}setLoading(e){this.loading.set(e)}isFormatAvailable(e){return this.availableFormats().includes(e)}getFormatConfig(e){return this.formatConfig[e]}static{this.\u0275fac=function(t){return new(t||a)}}static{this.\u0275cmp=v({type:a,selectors:[["app-export-menu"]],inputs:{availableFormats:[1,"availableFormats"],disabled:[1,"disabled"],buttonText:[1,"buttonText"],showIcon:[1,"showIcon"]},outputs:{export:"export"},decls:7,vars:3,consts:[["exportMenu","matMenu"],["mat-button","","aria-label","Menu d'export",1,"export-button",3,"matMenuTriggerFor","disabled"],["diameter","20"],[1,"export-menu"],[1,"dropdown-icon"],["mat-menu-item","",3,"disabled"],["mat-menu-item","",3,"click","disabled"],[1,"format-info"],[1,"format-label"],[1,"format-description"]],template:function(t,n){if(t&1&&(o(0,"button",1),_(1,an,1,0,"mat-spinner",2)(2,rn,6,2,"ng-container"),i(),o(3,"mat-menu",3,0),T(5,cn,1,1,null,null,_t),i()),t&2){let r=q(4);p("matMenuTriggerFor",r)("disabled",n.disabled()||n.loading()),l(),u(n.loading()?1:2),l(4),D(n.availableFormats())}},dependencies:[y,I,Tt,wt,yt,St,S,w,X,K],styles:[".export-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.export-button[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin-right:8px}.export-button[_ngcontent-%COMP%]   .dropdown-icon[_ngcontent-%COMP%]{margin-left:-4px;font-size:20px;width:20px;height:20px}.export-menu[_ngcontent-%COMP%]   mat-icon.format-icon[_ngcontent-%COMP%]{margin-right:12px}.export-menu[_ngcontent-%COMP%]   mat-icon.format-icon.format-pdf[_ngcontent-%COMP%]{color:#d32f2f}.export-menu[_ngcontent-%COMP%]   mat-icon.format-icon.format-excel[_ngcontent-%COMP%]{color:#2e7d32}.export-menu[_ngcontent-%COMP%]   mat-icon.format-icon.format-csv[_ngcontent-%COMP%]{color:#1976d2}.export-menu[_ngcontent-%COMP%]   .format-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.export-menu[_ngcontent-%COMP%]   .format-info[_ngcontent-%COMP%]   .format-label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;line-height:1.2}.export-menu[_ngcontent-%COMP%]   .format-info[_ngcontent-%COMP%]   .format-description[_ngcontent-%COMP%]{font-size:12px;color:var(--mat-text-secondary);line-height:1.2}.export-menu[_ngcontent-%COMP%]   button[mat-menu-item][_ngcontent-%COMP%]{height:auto;padding:12px 16px;line-height:1.4}.export-menu[_ngcontent-%COMP%]   button[mat-menu-item][_ngcontent-%COMP%]:hover{background-color:var(--mat-menu-item-hover-state-layer-color)}.export-menu[_ngcontent-%COMP%]   button[mat-menu-item][disabled][_ngcontent-%COMP%]{opacity:.5}@media(prefers-color-scheme:dark){.export-menu[_ngcontent-%COMP%]   mat-icon.format-icon.format-pdf[_ngcontent-%COMP%]{color:#ef5350}.export-menu[_ngcontent-%COMP%]   mat-icon.format-icon.format-excel[_ngcontent-%COMP%]{color:#66bb6a}.export-menu[_ngcontent-%COMP%]   mat-icon.format-icon.format-csv[_ngcontent-%COMP%]{color:#42a5f5}}"],changeDetection:0})}};function sn(a,e){if(a&1&&(o(0,"mat-icon"),s(1),i()),a&2){let t=c();F("icon-"+t.iconColor),l(),g(t.icon)}}var H=class a{constructor(){this.dialogRef=k(ae);this.data=k(oe);this.defaultData={confirmText:"Confirmer",cancelText:"Annuler",confirmColor:"primary",icon:"help_outline",iconColor:"primary"}}onConfirm(){this.dialogRef.close(!0)}onCancel(){this.dialogRef.close(!1)}get confirmText(){return this.data.confirmText||this.defaultData.confirmText}get cancelText(){return this.data.cancelText||this.defaultData.cancelText}get confirmColor(){return this.data.confirmColor||this.defaultData.confirmColor}get icon(){return this.data.icon||this.defaultData.icon}get iconColor(){return this.data.iconColor||this.defaultData.iconColor}static{this.\u0275fac=function(t){return new(t||a)}}static{this.\u0275cmp=v({type:a,selectors:[["app-confirmation-dialog"]],decls:13,vars:6,consts:[[1,"confirmation-dialog"],[1,"dialog-header"],[3,"class"],["mat-dialog-title",""],[1,"dialog-message"],["align","end"],["mat-button","","type","button","aria-label","Annuler l'action",3,"click"],["mat-flat-button","","type","button","cdkFocusInitial","","aria-label","Confirmer l'action",3,"click","color"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"div",1),_(2,sn,2,3,"mat-icon",2),o(3,"h2",3),s(4),i()(),o(5,"mat-dialog-content")(6,"p",4),s(7),i()(),o(8,"mat-dialog-actions",5)(9,"button",6),m("click",function(){return n.onCancel()}),s(10),i(),o(11,"button",7),m("click",function(){return n.onConfirm()}),s(12),i()()()),t&2&&(l(2),u(n.icon?2:-1),l(2),g(n.data.title),l(3),g(n.data.message),l(3),b(" ",n.cancelText," "),l(),p("color",n.confirmColor),l(),b(" ",n.confirmText," "))},dependencies:[at,re,ce,le,y,I,S,w],styles:[".confirmation-dialog[_ngcontent-%COMP%]{min-width:320px;max-width:500px}.confirmation-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:8px}.confirmation-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px}.confirmation-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   mat-icon.icon-primary[_ngcontent-%COMP%]{color:var(--mat-primary-color)}.confirmation-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   mat-icon.icon-accent[_ngcontent-%COMP%]{color:var(--mat-accent-color)}.confirmation-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   mat-icon.icon-warn[_ngcontent-%COMP%]{color:var(--mat-warn-color)}.confirmation-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:500}.confirmation-dialog[_ngcontent-%COMP%]   .dialog-message[_ngcontent-%COMP%]{margin:16px 0;font-size:14px;line-height:1.6;color:var(--mat-text-secondary)}.confirmation-dialog[_ngcontent-%COMP%]   mat-dialog-actions[_ngcontent-%COMP%]{padding:16px 0 0;gap:8px}.confirmation-dialog[_ngcontent-%COMP%]   mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:88px}@media(max-width:600px){.confirmation-dialog[_ngcontent-%COMP%]{min-width:280px}.confirmation-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px}.confirmation-dialog[_ngcontent-%COMP%]   .dialog-message[_ngcontent-%COMP%]{font-size:13px}.confirmation-dialog[_ngcontent-%COMP%]   mat-dialog-actions[_ngcontent-%COMP%]{flex-direction:column-reverse;align-items:stretch}.confirmation-dialog[_ngcontent-%COMP%]   mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}"],changeDetection:0})}};var dn=()=>["excel"],pn=()=>[5,10,25,50],Me=class a{constructor(){this.userService=k($t);this.router=k(ft);this.dialog=k(ie);this.notificationService=k(Et);this.loading=P(!1);this.users=P([]);this.totalUsers=P(0);this.searchParams=P({skip:0,limit:10,sort_by:"created_at",sort_order:"desc"});this.columns=P([{key:"username",label:"Nom d'utilisateur",sortable:!0,width:"150px"},{key:"full_name",label:"Nom complet",sortable:!0,width:"200px"},{key:"email",label:"Email",sortable:!0,width:"220px"},{key:"role",label:"R\xF4le",type:"badge",format:e=>gt[e]||e,cellClass:e=>`role-${e.role||"unknown"}`,width:"130px"},{key:"is_active",label:"Statut",type:"badge",format:e=>e?"Actif":"Inactif",cellClass:e=>e.is_active?"status-active":"status-inactive",width:"100px",align:"center"},{key:"created_at",label:"Date de cr\xE9ation",type:"date",sortable:!0,width:"150px"}]);this.actions=P([{icon:"visibility",label:"Voir",color:"primary",action:e=>this.viewUser(e),tooltip:"Voir les d\xE9tails"},{icon:"edit",label:"Modifier",action:e=>this.editUser(e),tooltip:"Modifier l'utilisateur"},{icon:"block",label:"D\xE9sactiver",color:"warn",action:e=>this.toggleUserStatus(e),visible:e=>e.is_active,tooltip:"D\xE9sactiver l'utilisateur"},{icon:"check_circle",label:"Activer",color:"accent",action:e=>this.toggleUserStatus(e),visible:e=>!e.is_active,tooltip:"Activer l'utilisateur"},{icon:"delete",label:"Supprimer",color:"warn",action:e=>this.deleteUser(e),tooltip:"Supprimer l'utilisateur"}]);this.filterConfigs=P([{key:"search",label:"Recherche",type:"text",placeholder:"Nom, email..."},{key:"role",label:"R\xF4le",type:"select",options:Object.entries(gt).map(([e,t])=>({value:e,label:t}))},{key:"is_active",label:"Statut",type:"select",options:[{value:!0,label:"Actif"},{value:!1,label:"Inactif"}]}]);this.stats=N(()=>{let e=this.users();return{total:this.totalUsers(),active:e.filter(t=>t.is_active).length,inactive:e.filter(t=>!t.is_active).length,admins:e.filter(t=>t.is_admin).length}})}ngOnInit(){this.loadUsers()}loadUsers(){this.loading.set(!0),this.userService.getUsers(this.searchParams()).subscribe({next:e=>{this.users.set(e.items),this.totalUsers.set(e.total),this.loading.set(!1)},error:e=>{console.error("Error loading users:",e),this.notificationService.showError("Erreur lors du chargement des utilisateurs"),this.loading.set(!1)}})}onFilterChange(e){this.searchParams.update(t=>$(U({},t),{search:e.search||void 0,role:e.role||void 0,is_active:e.is_active!==void 0?e.is_active:void 0,skip:0})),this.loadUsers()}onSortChange(e){this.searchParams.update(t=>$(U({},t),{sort_by:e.active,sort_order:e.direction})),this.loadUsers()}onPageChange(e){this.searchParams.update(t=>$(U({},t),{skip:e.pageIndex*e.pageSize,limit:e.pageSize})),this.loadUsers()}createUser(){this.router.navigate(["/users/new"])}viewUser(e){this.router.navigate(["/users",e.id])}editUser(e){this.router.navigate(["/users",e.id,"edit"])}toggleUserStatus(e){let t=e.is_active?"d\xE9sactiver":"activer";this.dialog.open(H,{data:{title:`${t.charAt(0).toUpperCase()+t.slice(1)} l'utilisateur`,message:`\xCAtes-vous s\xFBr de vouloir ${t} l'utilisateur "${e.first_name}" ?`,confirmText:t.charAt(0).toUpperCase()+t.slice(1),confirmColor:e.is_active?"warn":"accent"}}).afterClosed().subscribe(r=>{r&&(e.is_active?this.userService.deactivateUser(e.id):this.userService.activateUser(e.id)).subscribe({next:()=>{this.notificationService.showSuccess(`Utilisateur ${t}\xE9 avec succ\xE8s`),this.loadUsers()},error:O=>{console.error(`Error ${t}ing user:`,O),this.notificationService.showError(`Erreur lors de la ${t}ion de l'utilisateur`)}})})}deleteUser(e){this.dialog.open(H,{data:{title:"Supprimer l'utilisateur",message:`\xCAtes-vous s\xFBr de vouloir supprimer d\xE9finitivement l'utilisateur "${e.first_name}" ? Cette action est irr\xE9versible.`,confirmText:"Supprimer",confirmColor:"warn",icon:"warning",iconColor:"warn"}}).afterClosed().subscribe(n=>{n&&this.userService.deleteUser(e.id).subscribe({next:()=>{this.notificationService.showSuccess("Utilisateur supprim\xE9 avec succ\xE8s"),this.loadUsers()},error:r=>{console.error("Error deleting user:",r),this.notificationService.showError("Erreur lors de la suppression de l'utilisateur")}})})}onExport(e){e==="excel"?(this.exportMenu?.setLoading(!0),this.userService.exportUsers(this.searchParams()).subscribe({next:t=>{let n=window.URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download=`utilisateurs_${new Date().toISOString().split("T")[0]}.xlsx`,r.click(),window.URL.revokeObjectURL(n),this.exportMenu?.setLoading(!1),this.notificationService.showSuccess("Export Excel g\xE9n\xE9r\xE9 avec succ\xE8s")},error:t=>{console.error("Error exporting users:",t),this.exportMenu?.setLoading(!1),this.notificationService.showError("Erreur lors de l'export")}})):this.notificationService.showWarning(`Export ${e.toUpperCase()} non disponible`)}static{this.\u0275fac=function(t){return new(t||a)}}static{this.\u0275cmp=v({type:a,selectors:[["app-user-list"]],viewQuery:function(t,n){if(t&1&&Q(j,5),t&2){let r;L(r=B())&&(n.exportMenu=r.first)}},decls:54,vars:18,consts:[[1,"user-list-container"],[1,"page-header"],[1,"header-content"],[1,"subtitle"],["mat-flat-button","","color","primary","aria-label","Cr\xE9er un utilisateur",3,"click"],[1,"stats-grid"],[1,"stat-card"],[1,"stat-content"],[1,"stat-value"],[1,"stat-label"],[1,"stat-card","active"],[1,"stat-card","inactive"],[1,"stat-card","admin"],[3,"filterChange","filters","expanded"],[1,"toolbar"],[1,"toolbar-left"],[1,"result-count"],[1,"toolbar-right"],[3,"export","availableFormats"],[3,"sortChange","pageChange","columns","data","actions","loading","showPagination","pageSize","pageSizeOptions","noDataMessage"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1")(4,"mat-icon"),s(5,"group"),i(),s(6," Gestion des utilisateurs "),i(),o(7,"p",3),s(8,"G\xE9rez les comptes utilisateurs et leurs permissions"),i()(),o(9,"button",4),m("click",function(){return n.createUser()}),o(10,"mat-icon"),s(11,"person_add"),i(),s(12," Nouvel utilisateur "),i()(),o(13,"div",5)(14,"mat-card",6)(15,"mat-icon"),s(16,"people"),i(),o(17,"div",7)(18,"span",8),s(19),i(),o(20,"span",9),s(21,"Total"),i()()(),o(22,"mat-card",10)(23,"mat-icon"),s(24,"check_circle"),i(),o(25,"div",7)(26,"span",8),s(27),i(),o(28,"span",9),s(29,"Actifs"),i()()(),o(30,"mat-card",11)(31,"mat-icon"),s(32,"cancel"),i(),o(33,"div",7)(34,"span",8),s(35),i(),o(36,"span",9),s(37,"Inactifs"),i()()(),o(38,"mat-card",12)(39,"mat-icon"),s(40,"admin_panel_settings"),i(),o(41,"div",7)(42,"span",8),s(43),i(),o(44,"span",9),s(45,"Administrateurs"),i()()()(),o(46,"app-filter-panel",13),m("filterChange",function(d){return n.onFilterChange(d)}),i(),o(47,"div",14)(48,"div",15)(49,"span",16),s(50),i()(),o(51,"div",17)(52,"app-export-menu",18),m("export",function(d){return n.onExport(d)}),i()()(),o(53,"app-data-table",19),m("sortChange",function(d){return n.onSortChange(d)})("pageChange",function(d){return n.onPageChange(d)}),i()()),t&2&&(l(19),g(n.stats().total),l(8),g(n.stats().active),l(8),g(n.stats().inactive),l(8),g(n.stats().admins),l(3),p("filters",n.filterConfigs())("expanded",!1),l(4),b("",n.totalUsers()," utilisateur(s)"),l(2),p("availableFormats",mt(16,dn)),l(),p("columns",n.columns())("data",n.users())("actions",n.actions())("loading",n.loading())("showPagination",!0)("pageSize",10)("pageSizeOptions",mt(17,pn))("noDataMessage","Aucun utilisateur trouv\xE9"))},dependencies:[bt,Mt,y,I,S,w,tt,W,Y,Z,at,G,ot,st,j],styles:[".user-list-container[_ngcontent-%COMP%]{padding:24px;max-width:1600px;margin:0 auto}.user-list-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:24px}.user-list-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;font-size:28px;font-weight:500;margin:0 0 8px}.user-list-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px;color:var(--mat-primary-color)}.user-list-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin:0;color:var(--mat-text-secondary);font-size:14px}.user-list-container[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-bottom:24px}.user-list-container[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:20px;transition:transform .2s}.user-list-container[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.user-list-container[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:40px;width:40px;height:40px;color:var(--mat-primary-color)}.user-list-container[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.user-list-container[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:32px;font-weight:600;line-height:1;color:var(--mat-text-primary)}.user-list-container[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:13px;color:var(--mat-text-secondary);margin-top:4px}.user-list-container[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-card.active[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#4caf50}.user-list-container[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-card.inactive[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#f44336}.user-list-container[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-card.admin[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ff9800}.user-list-container[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;padding:12px 16px;background-color:var(--mat-card-background-color);border-radius:8px;box-shadow:0 1px 3px #0000001a}.user-list-container[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-left[_ngcontent-%COMP%]   .result-count[_ngcontent-%COMP%]{font-size:14px;color:var(--mat-text-secondary);font-weight:500}.user-list-container[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-right[_ngcontent-%COMP%]{display:flex;gap:12px}  .role-administrator .badge{background-color:#ff9800;color:#fff}  .role-manager .badge{background-color:#2196f3;color:#fff}  .role-officer .badge{background-color:#4caf50;color:#fff}  .role-citizen .badge{background-color:#9c27b0;color:#fff}  .role-consultant .badge{background-color:#607d8b;color:#fff}  .status-active .badge{background-color:#4caf50;color:#fff}  .status-inactive .badge{background-color:#f44336;color:#fff}@media(max-width:768px){.user-list-container[_ngcontent-%COMP%]{padding:16px}.user-list-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{flex-direction:column;gap:16px}.user-list-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.user-list-container[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.user-list-container[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{flex-direction:column;gap:12px;align-items:stretch}}"],changeDetection:0})}};export{Me as UserListComponent};
