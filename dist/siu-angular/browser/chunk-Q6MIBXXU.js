import{a as l}from"./chunk-FBCHPQNP.js";import{O as n,Y as s,ba as i}from"./chunk-E7AQ6X4Y.js";var o=class a{constructor(){this.api=i(l);this.endpoint="/parcels";this.parcelsCache$=new Map}getParcels(e){let r=JSON.stringify(e||{});if(!this.parcelsCache$.has(r)){let t=this.api.get(this.endpoint,e).pipe(n({bufferSize:1,refCount:!0}));this.parcelsCache$.set(r,t),setTimeout(()=>this.parcelsCache$.delete(r),300*1e3)}return this.parcelsCache$.get(r)}clearCache(){this.parcelsCache$.clear()}getParcelById(e){return this.api.get(`${this.endpoint}/${e}`)}getParcel(e){return this.getParcelById(e)}searchParcels(e){return this.getParcels(e)}searchByReference(e){return this.api.get(`${this.endpoint}/reference/${e}`)}createParcel(e){return this.clearCache(),this.api.post(this.endpoint,e)}updateParcel(e,r){return this.clearCache(),this.api.put(`${this.endpoint}/${e}`,r)}deleteParcel(e){return this.clearCache(),this.api.delete(`${this.endpoint}/${e}`)}assignOwner(e,r){return this.api.post(`${this.endpoint}/${e}/owners`,r)}getOwners(e){return this.api.get(`${this.endpoint}/${e}/owners`)}updateOwner(e,r,t){return this.api.put(`${this.endpoint}/${e}/owners/${r}`,t)}removeOwner(e,r){return this.api.delete(`${this.endpoint}/${e}/owners/${r}`)}checkAvailability(e){return this.api.get(`${this.endpoint}/availability/${e}`)}exportToCsv(e){return this.api.postBlob(`${this.endpoint}/export/csv`,e||{})}exportToGeoJSON(e){return this.api.postBlob(`${this.endpoint}/export/geojson`,e||{})}exportToShapefile(e){return this.api.postBlob(`${this.endpoint}/export/shapefile`,e||{})}getParcelStats(){return this.api.get(`${this.endpoint}/stats`)}findNearby(e,r,t=1,c=10){return this.api.get(`${this.endpoint}/nearby`,{latitude:e,longitude:r,radius_km:t,limit:c})}getParcelHistory(e){return this.api.get(`${this.endpoint}/${e}/history`)}checkParcelAvailability(e){return this.api.get(`${this.endpoint}/${e}/availability`)}getParcelStatus(e){return this.api.get(`${this.endpoint}/${e}/status`)}reserveParcel(e,r=30){return this.api.post(`${this.endpoint}/${e}/reserve`,{duration_minutes:r})}getAlerts(e=50,r=null){let t={limit:e.toString()};return r!==null&&(t.acknowledged=r.toString()),this.api.get(`${this.endpoint}/alerts`,t)}acknowledgeAlert(e){return this.api.put(`${this.endpoint}/alerts/${e}/acknowledge`,{})}getVerificationLog(e=100){return this.api.get(`${this.endpoint}/verification-log`,{limit:e.toString()})}updateParcelGeometry(e,r){return this.api.put(`${this.endpoint}/${e}/geometry`,{geometry:r})}getParcelsGeoJSON(e,r){let t={};return e&&(t.zone=e),r&&(t.status=r),this.api.get(`${this.endpoint}/map/geojson`,t)}getMapBounds(){return this.api.get(`${this.endpoint}/map/bounds`)}static{this.\u0275fac=function(r){return new(r||a)}}static{this.\u0275prov=s({token:a,factory:a.\u0275fac,providedIn:"root"})}};export{o as a};
