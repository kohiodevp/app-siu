import{a as p}from"./chunk-FJY5KO7T.js";import{Ec as u,Y as g,ba as l,sa as h}from"./chunk-E7AQ6X4Y.js";import{a as c,b as f}from"./chunk-EQDQRRRY.js";var m=class o{constructor(){this.snackBar=l(p);this._notifications=h([]);this.notifications=this._notifications.asReadonly();this.unreadCount=u(()=>this._notifications().filter(i=>!i.read).length)}show(i,t="info",n,s=5e3){let d={duration:s,panelClass:[`notification-${t}`],verticalPosition:"top",horizontalPosition:"right"};this.snackBar.open(i,"Fermer",d);let r={id:Date.now(),type:t,title:n||this.getTypeTitle(t),message:i,timestamp:new Date,read:!1},a=this._notifications(),e=[r,...a.slice(0,49)];this._notifications.set(e)}showPersistent(i,t,n="info"){let s={duration:0,panelClass:[`notification-${n}`,"persistent"],verticalPosition:"top",horizontalPosition:"right"},d=this.snackBar.open(t,"Fermer",s),r={id:Date.now(),type:n,title:i,message:t,timestamp:new Date,read:!1},a=this._notifications(),e=[r,...a.slice(0,49)];this._notifications.set(e)}markAsRead(i){this._notifications.update(t=>t.map(n=>n.id===i?f(c({},n),{read:!0}):n))}markAllAsRead(){this._notifications.update(i=>i.map(t=>f(c({},t),{read:!0})))}remove(i){this._notifications.update(t=>t.filter(n=>n.id!==i))}clearAll(){this._notifications.set([])}getUnreadNotifications(){return this._notifications().filter(i=>!i.read)}getAllNotifications(){return this._notifications()}getTypeTitle(i){return{success:"Succ\xE8s",error:"Erreur",warning:"Avertissement",info:"Information"}[i]||"Notification"}success(i,t,n=5e3){this.show(i,"success",t,n)}error(i,t,n=7e3){this.show(i,"error",t,n)}warning(i,t,n=6e3){this.show(i,"warning",t,n)}info(i,t,n=5e3){this.show(i,"info",t,n)}showInfo(i,t,n=5e3){this.info(i,t,n)}showSuccess(i,t,n=5e3){this.success(i,t,n)}showError(i,t,n=7e3){this.error(i,t,n)}showWarning(i,t,n=6e3){this.warning(i,t,n)}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275prov=g({token:o,factory:o.\u0275fac,providedIn:"root"})}};export{m as a};
